!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a5eacbf0-9b09-4643-b088-6ae1c7e0aaea",e._sentryDebugIdIdentifier="sentry-dbid-a5eacbf0-9b09-4643-b088-6ae1c7e0aaea")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1747],{75113:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r=n(27573),i=n(99819);n(7653);var s=n(94873);n(22628);let a=e=>{let{children:t,content:n,side:a,sideOffset:u=5,className:o,delayDuration:l=700,arrowClassName:c,disabled:d=!1,align:f="center",style:p,onPointerDownOutside:v}=e;return n?(0,r.jsx)(i.zt,{delayDuration:l,disableHoverableContent:!1,children:(0,r.jsxs)(i.fC,{defaultOpen:!1,children:[(0,r.jsx)(i.xz,{asChild:!0,children:t}),d?null:(0,r.jsx)(i.h_,{children:(0,r.jsxs)(i.VY,{className:(0,s.cn)("tooltip-content z-50 bg-[#6096FF] text-white dark:bg-[#525252] dark:text-white",o),sideOffset:u,side:a,onPointerDownOutside:v,align:f,style:p,children:[n,(0,r.jsx)(i.Eh,{className:(0,s.cn)("fill-[#6096FF] dark:fill-[#525252]",c)})]})})]})}):t}},13784:function(e,t,n){"use strict";n.d(t,{Z:function(){return h},default:function(){return g}});var r=n(27573),i=n(7653),s=n(22960),a=n(38077),u=n(58022),o=n(46385).lW;let l=new Map;class c extends EventTarget{setSessionId(e){e!==this.sessionId&&(this.sessionId=e,this.eventsList.length>0&&this.setEventsList([]))}abort(){(0!==this.queue.size||0!==this.queue.pending||this.pendingDownloadEventList.length)&&(this.queue.clear(),this.pendingDownloadEventList=[],this.timestampAnchor=0)}getLoading(){let e=this.pendingDownloadEventList.length>0;return e!==this.prevLoading&&(this.prevLoading=e,this.dispatchEvent(new Event("change:loading"))),e}getEventsList(){return this.eventsList}setTimestamp(e){if(e<0){this.timestampAnchor=+new Date;return}this.timestampAnchor=e}setEventsList(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e=e.sort((e,t)=>e.timestampMs-t.timestampMs))||!e.length){this.eventsList=[],this.pendingDownloadEventList=[],this.dispatchEvent(new Event("change:eventsList"));return}if(t){this.eventsList=e.map(e=>({...e,loading:!0})),this.pendingDownloadEventList=e.map(e=>({priority:0,...e})),this.dispatchEvent(new Event("change:eventsList"));return}this.eventsList=e,function(e){for(let t=0;t<e.length;t++){let n=e[t];if((0,a.yi)(n)&&!n.duplicate)for(let r=t+1;r<e.length;r++){let t=e[r];if((0,a.yi)(t)&&t.file===n.file){if(void 0===t.contents||void 0===n.contents||t.contents!==n.contents)break;t.duplicate=!0}}}}(this.eventsList),this.dispatchEvent(new Event("change:eventsList"))}async loadEventsItem(e){let t=this.initialPriority+1;if(l.has(e.event_id)){this.addCompletedEvent(l.get(e.event_id));return}let n=await this.getPresignedUrlsList([e]),r=await this.queue.add(async()=>await d(e,n,{shouldRetry:!0}),{priority:t}),i={...r,loading:!1};l.set(r.event_id,i),this.addCompletedEvent(i)}downloadHeuristic(e,t){let n=["status_update","progress_update","initial_user_message","devin_message","user_message","send_secrets"],r=n.includes(e.type)?1:0,i=n.includes(t.type)?1:0;if(i-r!=0)return i-r;if(t.priority-e.priority!=0)return t.priority-e.priority;let s=Math.abs(e.timestampMs-this.timestampAnchor),a=Math.abs(t.timestampMs-this.timestampAnchor);return s===a?t.timestampMs-e.timestampMs:s-a}*getChunks(){for(;this.pendingDownloadEventList.length>0;)this.pendingDownloadEventList.sort(this.downloadHeuristic.bind(this)),yield this.pendingDownloadEventList.splice(0,c.CONCURRENCY)}async loadEventsList(e){for(let t of(e&&e.length&&this.getEventsList().length!==e.length&&this.setEventsList(e,!0),this.getChunks())){if(0===t.length)continue;let e=await this.getPresignedUrlsList(t),n=[];for(let r of t){let t=this.queue.add(async()=>l.has(r.event_id)?l.get(r.event_id):await d(r,e),{priority:0});n.push(t)}let r=await Promise.all(n);r.forEach(e=>{e.loading=!1,l.set(e.event_id,e)}),this.setEventsList(this.updateList(this.getEventsList(),r))}}updateList(e,t){return e.map(e=>t.find(t=>t.event_id===e.event_id)||e)}requestHighPriorityDownload(e){this.pendingDownloadEventList.forEach(e=>e.priority=0),this.pendingDownloadEventList.filter(e).forEach(e=>e.priority=1)}addCompletedEvent(e){this.setEventsList([...this.eventsList,e])}onActiveOrIdle(){this.getLoading()}async getPresignedUrlsList(e){let t=function(e){let t=[];for(let n of e){if((0,a.dr)(n)&&n.screenshot_key){let e={eventId:n.event_id,s3Key:n.screenshot_key};t.push(e)}if((0,a.yi)(n)&&n.contents_key||(0,a.Fs)(n)&&n.contents_key||(0,a.XD)(n)&&n.contents_key){let e={eventId:n.event_id,s3Key:n.contents_key};t.push(e)}}return t}(e),n=await this.queue.add(()=>(0,u.eV)(this.sessionId,t.map(e=>e.s3Key)),{priority:0}),r=new Map;return t.forEach((e,t)=>{let i=n[t];r.set(e.eventId,{...e,presignedUrl:i.url,headers:i.headers})}),r}constructor(){super(),this.eventsList=[],this.pendingDownloadEventList=[],this.prevLoading=!1,this.queue=new s.Z({concurrency:c.CONCURRENCY}),this.initialPriority=0,this.timestampAnchor=+new Date,this.queue.on("active",this.onActiveOrIdle.bind(this)),this.queue.on("idle",this.onActiveOrIdle.bind(this))}}async function d(e,t,n){let r=t.get(e.event_id);if((0,a.dr)(e)&&e.screenshot_key&&r){let t=await (0,u.i2)({url:r.presignedUrl,headers:r.headers},n);return{...e,screenshot_image_url:t.value}}if((0,a.yi)(e)&&r){let t=await (0,u.i2)({url:r.presignedUrl,headers:r.headers},n);return{...e,contents:t.value}}if((0,a.XD)(e)&&r){let t=await (0,u.i2)({url:r.presignedUrl,headers:r.headers},n);return{...e,contents_raw:t.value}}if((0,a.Fs)(e)&&r){let t=await (0,u.i2)({url:r.presignedUrl,headers:r.headers},n);return{...e,contents_raw:t.value}}if((0,a.Fs)(e)&&e.contents_gzip){let t=await p(e.contents_gzip);return{...e,contents_raw:t}}if((0,a.Fs)(e)&&e.contents){let t=function(e){if(v[e])return v[e];let t=o.from(e,"base64").toString("utf-8");return v[e]=t,t}(e.contents);return{...e,contents_raw:t}}return e}c.CONCURRENCY=50,c.instance=null;let f={};async function p(e){if(f[e])return f[e];let t=new Response(o.from(e,"base64")).body.pipeThrough(new DecompressionStream("gzip")),n=await new Response(t).text();return f[e]=n,n}let v={},h=i.createContext({loadManager:null});var g=e=>{let{children:t}=e,n=new c;return(0,r.jsx)(h.Provider,{value:{loadManager:n},children:t})}},38077:function(e,t,n){"use strict";n.d(t,{$2:function(){return L},$q:function(){return j},Az:function(){return D},B1:function(){return V},Bd:function(){return _},EH:function(){return J},Fo:function(){return U},Fs:function(){return f},G_:function(){return w},H7:function(){return y},Hz:function(){return l},J8:function(){return M},KJ:function(){return h},LQ:function(){return m},Qo:function(){return Z},SH:function(){return c},VT:function(){return O},XD:function(){return I},XP:function(){return A},a8:function(){return v},ai:function(){return C},cv:function(){return u},dr:function(){return d},eR:function(){return a},ed:function(){return R},h6:function(){return b},hM:function(){return o},ho:function(){return Q},kI:function(){return k},l5:function(){return s},mX:function(){return q},pY:function(){return P},qQ:function(){return z},r9:function(){return N},tO:function(){return S},uc:function(){return T},wZ:function(){return g},wj:function(){return F},yi:function(){return p},yw:function(){return E},zt:function(){return x}});var r=n(18255),i=n.n(r);function s(e,t){return(null==e?void 0:e.enum)==="finished"?"finished":(null==t?void 0:t.type)==="pause"?"paused":(null==t?void 0:t.type)==="queued"?"queued":((null==t?void 0:t.type)==="checkpoint_restore_requested"||(null==t?void 0:t.type)==="initializing_with_rollback")&&((null==t?void 0:t.timestampMs)||0)>((null==e?void 0:e.timestampMs)||0)?"waiting":e?e.enum:"initializing"}function a(e){return"error"===e.status||"exit"===e.status?"finished":s(e.latest_status_contents,e.latest_loop_contents)}function u(e){return"initialized"===e.type}function o(e){return"initializing"===e.type}function l(e){return"devin_message"===e.type||"user_message"===e.type||"initial_user_message"===e.type||"send_secrets"===e.type}function c(e){return"status_update"===e.type}function d(e){return"active_app_update"===e.type}function f(e){return"terminal_update"===e.type}function p(e){return"editor_update"===e.type}function v(e){return"is_typing"===e.type}function h(e){return"progress_update"===e.type}function g(e){return"note_used"===e.type}function _(e){return"eval_result"===e.type}function y(e){return"playbook_step_report"===e.type}function m(e){return"new_master_plan_step"===e.type}function b(e){return"user_update_master_plan"===e.type||"updated_master_plan"===e.type||"new_master_plan_step"===e.type}function w(e){return"play"===e.type||"pause"===e.type||"stop"===e.type||"queued"==e.type||"initializing_with_rollback"==e.type||"checkpoint_restore_requested"==e.type||"checkpoint_restored"==e.type}function x(e){return"rollback_enabled"===e.type}function L(e){return"checkpoint_created"===e.type&&!0===e.saved_to_s3}function E(e){return"stop"===e.type}function k(e){return"status_update"===e.type&&"finished"===e.enum}function C(e){return"terminal_close"===e.type}function N(e){return"shell_process_started"===e.type}function P(e){return"checkpoint_created"===e.type}function j(e){return"checkpoint_restored"===e.type}function D(e){return"checkpoint_restore_requested"===e.type}function I(e){return"shell_process_completed"===e.type}function S(e){return"devin_suspended"===e.type}function M(e){return"devin_exited"===e.type}function q(e){return"request_speed_update"===e.type}function O(e){return"knowledge_update"===e.type}function A(e){return"pr_created"===e.type}function R(e){return"pr_comment"===e.type}function z(e){return"human_mode_ask_user"===e.type}function F(e){return"human_mode_user_response"===e.type}function U(e){return"human_mode_input_received"===e.type}function Q(e){return"human_mode_enable"===e.type}function T(e){return"human_mode_enabled"===e.type}function V(e){return"human_mode_disable"===e.type}function J(e){return"human_mode_disabled"===e.type}function Z(e){let t=[],n=e.length-1;for(;n>=0;){let r=e[n];if(t.push(r),n-=1,j(r)){let i=[],s=!1;for(;n>=0;){let a=e[n];if(!s&&S(a))s=!0,t.push(...i);else if(P(a)&&a.checkpoint_id===r.checkpoint_id)break;i.push(a),n-=1}}}return i().reverse(t)}},87623:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(7653),i=n(13784);let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{loadManager:n}=(0,r.useContext)(i.Z),[s,a]=(0,r.useState)([]),[u,o]=(0,r.useState)(!0),l=(0,r.useMemo)(()=>t?null:n,[t,n]);return(0,r.useEffect)(()=>{if(l)return l.setSessionId(e),()=>{l.abort()}},[l,e]),(0,r.useEffect)(()=>{if(!l)return;let e=()=>{o(l.getLoading())},t=()=>{a(l.getEventsList())};return l.addEventListener("change:loading",e),l.addEventListener("change:eventsList",t),()=>{l.removeEventListener("change:loading",e),l.removeEventListener("change:eventsList",t)}},[l]),[l,s,u]}},4652:function(e,t,n){"use strict";n.d(t,{LP:function(){return u},aC:function(){return o},aF:function(){return c}});var r=n(40772);let i=e=>"clerk-".concat(e),s=e=>e?i(e):null,a=(e,t)=>e?t?i(t):"personal-".concat(s(e)):null,u=async()=>{var e,t;return null!==(t=await (null===(e=window.Clerk.session)||void 0===e?void 0:e.getToken({template:"with-metadata"})))&&void 0!==t?t:null},o=()=>{let{userId:e,orgId:t,...n}=(0,r.aC)();return{...n,userId:s(e),orgId:a(e,t)}};var l=n(23269);let c=()=>{let{data:e}=(0,l.pg)();return{user:e}};n(69981)},69981:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return s}});var r=n(27573),i=n(40772);let s=e=>{let{children:t}=e;return(0,r.jsx)(i.El,{publishableKey:"pk_live_Y2xlcmsuZGV2aW4uYWkk",children:t})}},55581:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(27573),i=n(51430),s=n(57908),a=n(75113);let u=e=>{let{className:t,defaultIcon:n,defaultTitle:u,disabled:o=!1,loading:l=!1,loadingTitle:c,onClick:d,title:f,theme:p,type:v,size:h="md"}=e;return(0,r.jsx)(a.u,{content:(0,r.jsx)("span",{className:"px-2 py-1 text-xs",children:f}),disabled:!f,delayDuration:100,children:(0,r.jsxs)("button",{className:(0,s.Z)("group flex items-center justify-center space-x-2 rounded-md font-medium transition disabled:cursor-not-allowed disabled:opacity-70",t,"sm"===h&&"px-2 py-1.5 text-xs","md"===h&&"px-3 py-2 text-sm","primary"===p&&"bg-[#6096FF] text-white hover:bg-[#4f88fb] active:bg-[#437df3]","default"===p&&"bg-[#d8d9db] text-[#212529] hover:bg-[#babec1] active:bg-[#95999d]","danger"===p&&"bg-red-500 text-white opacity-90 hover:bg-red-600 hover:opacity-100 active:bg-red-700","danger-light"===p&&"dark:bg-input-dark dark:disabled:hover:bg-input-dark bg-slate-100 text-slate-600 hover:bg-red-500 hover:text-slate-100 disabled:hover:bg-slate-100 disabled:hover:text-slate-600 dark:text-slate-200 dark:hover:bg-red-500 dark:hover:text-slate-100","simple"===p&&"text-input-dark group-enabled:active:text-cloud group-enabled:hover:text-cloud shadow-[inset_0_0_0_2px_currentColor] shadow-current dark:text-white dark:group-enabled:hover:text-[#fcfcfc] dark:group-enabled:active:text-[#fcfcfc]"),onClick:d,disabled:o,type:v,children:[l?(0,r.jsx)(i.U,{size:16,className:"animate-spin"}):n,l?c:u]})})}},77146:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var r=n(27573),i=n(9565),s=n(35592),a=n(84503),u=n(57908),o=n(7653);let l=e=>{let{id:t,placeholder:n,itemsList:s,className:o,defaultValue:l,value:d,onValueChange:f}=e;return(0,r.jsxs)(a.fC,{value:d,defaultValue:l,onValueChange:f,children:[(0,r.jsxs)(a.xz,{id:t,className:(0,u.Z)("radix-trigger inline-flex h-[32px] items-center justify-between gap-[5px] rounded-md px-3 text-xs leading-none outline-none","bg-slate-100 dark:bg-[#484848] dark:text-slate-300",o),"aria-label":n,children:[(0,r.jsx)(a.B4,{placeholder:n}),(0,r.jsx)(a.JO,{className:"icon",children:(0,r.jsx)(i.p,{size:14})})]}),(0,r.jsx)(a.h_,{children:(0,r.jsx)(a.VY,{className:"z-50 overflow-hidden rounded-lg bg-slate-100 dark:bg-[#343434] dark:text-slate-300",children:(0,r.jsx)(a.l_,{className:"p-[5px]",children:(0,r.jsxs)(a.ZA,{children:[n&&(0,r.jsx)(a.__,{className:"mb-[5px] border-b border-slate-100 px-[25px] pb-[5px] text-xs leading-[25px] opacity-70 dark:border-[#2f2f2f]",children:n}),s.map(e=>(0,r.jsx)(c,{value:e.value,children:e.label},e.value))]})})})})]})},c=o.forwardRef((e,t)=>{let{children:n,className:i,...o}=e;return(0,r.jsxs)(a.ck,{className:(0,u.Z)("relative flex h-[30px] select-none items-center rounded-[3px] pl-[25px] pr-[35px] text-xs leading-none hover:bg-slate-200 data-[disabled]:pointer-events-none data-[highlighted]:outline-none dark:hover:bg-[#3a3a3a]",i),...o,ref:t,children:[(0,r.jsx)(a.eT,{children:n}),(0,r.jsx)(a.wU,{className:"absolute left-0 inline-flex w-[25px] items-center justify-center",children:(0,r.jsx)(s.J,{})})]})});c.displayName="SelectItem"},53358:function(e,t,n){"use strict";n.d(t,{P:function(){return i.P},z:function(){return r.z}});var r=n(55581),i=n(77146)},78748:function(e,t,n){"use strict";n.d(t,{h:function(){return x}});var r=n(7653),i=n(87623),s=n(96268);let a=(0,n(66641).Ue)((e,t)=>({sessionId:null,setSessionId:t=>e({sessionId:t}),socket:null,setSocket:t=>e({socket:t}),socketConnected:!1,setSocketConnected:t=>e({socketConnected:t}),events:[],setEvents:t=>e({events:t}),liveEvents:[],setLiveEvents:t=>e({liveEvents:t}),pushLiveEvent:t=>{e(e=>({liveEvents:[...e.liveEvents,t].sort((e,t)=>e.timestampMs-t.timestampMs)}))},resetStore:()=>{var n;null===(n=t().socket)||void 0===n||n.close(),e({sessionId:null,socket:null,socketConnected:!1,events:[],liveEvents:[]})}}));function u(e){return{...e,timestampMs:new Date(e.timestamp).getTime()}}var o=n(47327),l=n(93512),c=n(4652),d=n(55076);let f=(e,t)=>{let{onReconnect:n,onDisconnect:i}=t,{isSignedIn:s}=(0,c.aC)(),u=(0,r.useRef)(!1),f=(0,r.useRef)(!1),p=a(e=>e.socket),v=a(e=>e.setSocket),h=a(e=>e.socketConnected),g=a(e=>e.setSocketConnected),[_,y]=(0,r.useState)(!1),m=(0,r.useMemo)(()=>_&&!h,[h,_]),[b,w]=(0,r.useState)(Date.now());return(0,r.useEffect)(()=>{if(!s||!e||p)return;let t=new o.X(async()=>{let t=await (0,c.LP)();return new URL("/events/".concat(e,"/live?token=").concat(t),"https://api.devin.ai".replace("http","ws")).toString()},void 0,{connectionTimeout:1e4});t.onopen=()=>{g(!0),y(!0),u.current&&(null==n||n()),u.current=!1,f.current=!0},t.onclose=()=>{g(!1),f.current&&window.location.pathname==="/sessions/".concat((0,d.I0)(e))&&(null==i||i()),u.current=!0,f.current=!1},v(t)},[s,e,h,g,v,p,i,n,u,f]),(0,l.Z)(()=>{p&&s&&(Date.now()-b<3e4||p.reconnect(),p.send(JSON.stringify({type:"ping"})))},h?1e4:null),(0,r.useEffect)(()=>{if(!s||!p||!h)return;let e=()=>{w(Date.now())};return p.addEventListener("message",e),p.send(JSON.stringify({type:"subscribe_devin"})),()=>{p.removeEventListener("message",e)}},[p,h,s]),[p,h,m]},p=(e,t,n,i)=>{let[s,o,l]=f(e,{onReconnect:n,onDisconnect:i}),c=a(e=>e.pushLiveEvent),d=a(e=>e.liveEvents);(0,r.useEffect)(()=>{if(!s||!o||!e)return;let n=e=>{let n=JSON.parse(e.data);if("devin_event"===n.type){let e=u(n.event);null==t||t.loadEventsItem(e),c(e)}else"pong"===n.type||console.error("Got unknown event from server",n)};return s.addEventListener("message",n),()=>{s.removeEventListener("message",n)}},[s,e,o,t,c]);let p=(0,r.useCallback)(t=>{s&&e&&s.send(JSON.stringify({type:"user_message",message:t}))},[s,e]),v=(0,r.useCallback)(t=>{s&&e&&s.send(JSON.stringify({type:"user_update_master_plan",sessionId:e,plan:t,current_step:"1."}))},[s,e]),h=(0,r.useCallback)(t=>{s&&e&&s.send(JSON.stringify({type:t}))},[s,e]),g=(0,r.useCallback)((t,n)=>{s&&e&&s.send(JSON.stringify({type:"rollback",checkpoint_id:t,latest_master_plan:n}))},[s,e]),_=(0,r.useCallback)((t,n)=>{s&&e&&s.send(JSON.stringify({type:"send_secrets",secrets:t,uuid:n}))},[s,e]);return{liveEvents:d,emitUserMessage:p,emitLoopSignal:h,emitSecrets:_,emitRestoreToCheckpoint:g,emitUpdateMasterPlan:v,emitSpeedUpdate:(0,r.useCallback)(t=>{s&&e&&s.send(JSON.stringify({type:"request_speed_update",speed:t}))},[s,e]),emitHumanModeUserResponse:(0,r.useCallback)(t=>{s&&e&&s.send(JSON.stringify(t))},[s,e]),emitHumanModeStatus:(0,r.useCallback)(t=>{if(s&&e){if("enable"===t)s.send(JSON.stringify({type:"human_mode_enable"}));else if("disable"===t)s.send(JSON.stringify({type:"human_mode_disable"}));else throw Error("Unknown human mode status: ".concat(t))}},[s,e]),disconnected:l}};var v=n(65026),h=n(26821),g=n(29484);let _=async(e,t,n)=>{let r={};return t&&(r.cursor=t),await g.L.get("events/".concat(e),{signal:n,searchParams:r,retry:0}).json()},y=e=>{let{isLoaded:t}=(0,c.aC)(),n=m(e),i=(0,v.N)({queryKey:n,enabled:!!t&&!!e,initialPageParam:void 0,queryFn:t=>{let{pageParam:n,signal:r}=t;return _(e,n,r)},getNextPageParam:e=>null==e?void 0:e.next_cursor,getPreviousPageParam:e=>null==e?void 0:e.prev_cursor,retry:!1}),s=(0,g.h)(n.join("-"),i),a=(0,r.useMemo)(()=>{var e;return i.data?null===(e=i.data)||void 0===e?void 0:e.pages.flatMap(e=>e.result.map(u)).sort((e,t)=>t.timestampMs-e.timestampMs):[]},[i.data]);return{...i,data:a,isLoading:s}},m=e=>["events",e],b=()=>{let e=(0,h.NL)();return{setQueryData:(0,r.useCallback)(t=>{let n=m(a.getState().sessionId);e.setQueryData(n,t)},[e]),cancelQueries:(0,r.useCallback)(()=>{let t=m(a.getState().sessionId);e.cancelQueries({queryKey:t})},[e]),refetchQueries:(0,r.useCallback)(()=>{let t=m(a.getState().sessionId);e.refetchQueries({queryKey:t})},[e])}},w=e=>{let{data:t,isLoading:n}=y(a(e=>e.sessionId));return(0,r.useEffect)(()=>{n||null==e||e.loadEventsList(t)},[n,e,t]),{pastEvents:t,isLoading:n}},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a(e=>e.resetStore),u=a(e=>e.setSessionId),o=a(e=>e.sessionId),l=a(e=>e.events),c=a(e=>e.setEvents),d=a(e=>e.setLiveEvents),f=b();(0,r.useEffect)(()=>{if(e!==o)return u(e),()=>{let e=a.getState().socket;o&&e&&(n(),f.cancelQueries())}},[e,n,u,o,f]);let[v,h,g]=(0,i.F)(o,t),{pastEvents:_}=w(v),{emitLoopSignal:y,emitUserMessage:m,emitSecrets:x,emitRestoreToCheckpoint:L,emitUpdateMasterPlan:E,emitSpeedUpdate:k,emitHumanModeUserResponse:C,emitHumanModeStatus:N,liveEvents:P,disconnected:j}=p(o,v,(0,r.useCallback)(()=>{f.cancelQueries(),f.refetchQueries()},[f]),(0,r.useCallback)(()=>{let{liveEvents:e}=a.getState(),t=[..._,...e];f.setQueryData({pages:[{result:t,next_cursor:null,prev_cursor:null}],pageParams:[void 0]}),d([])},[_,d,f]));(0,r.useEffect)(()=>{c([..._,...P].sort((e,t)=>e.timestampMs-t.timestampMs))},[P,_,c]);let D=(0,s.zA)(l);return{devinEvents:l,enrichedEventsList:h,loading:g,emitUserMessage:m,emitLoopSignal:y,emitSecrets:x,emitRestoreToCheckpoint:L,emitUpdateMasterPlan:E,emitSpeedUpdate:k,emitHumanModeUserResponse:C,emitHumanModeStatus:N,sessionSecrets:D,disconnected:j}}},29484:function(e,t,n){"use strict";n.d(t,{L:function(){return s},h:function(){return o}});var r=n(7635),i=n(4652);let s=r.ZP.create({prefixUrl:"https://api.devin.ai",hooks:{beforeRequest:[async e=>{let t=await (0,i.LP)();e.headers.set("Authorization","Bearer ".concat(t))}]},timeout:!1});var a=n(7653);let u={},o=(e,t)=>((0,a.useEffect)(()=>(!t.hasNextPage||t.isFetching||t.isError||u[e]||(u[e]=t.fetchNextPage().then(()=>{u[e]=null})),()=>{delete u[e]}),[e,t,t.hasNextPage,t.isFetching,t.isError,t.fetchNextPage]),t.hasNextPage||t.isFetching)},57568:function(e,t,n){"use strict";n.d(t,{An:function(){return b},L_:function(){return d},Wq:function(){return h},aC:function(){return y},aH:function(){return p}});var r=n(65026),i=n(2560),s=n(26821),a=n(7653),u=n(4652),o=n(29484),l=n(27265);let c=(e,t)=>["inactive-sessions",e,t];function d(e){let{orgId:t,isSignedIn:n}=(0,u.aC)(),i=c(t,e),s=(0,r.N)({queryKey:i,enabled:!!n,initialPageParam:void 0,queryFn:t=>{let{pageParam:n}=t;return(0,l.Rx)(e,n,!1,!0)},getNextPageParam:e=>null==e?void 0:e.next_cursor,getPreviousPageParam:e=>null==e?void 0:e.prev_cursor,retry:!1});(0,o.h)(i.join("-"),s);let d=(0,a.useMemo)(()=>{var e;return null===(e=s.data)||void 0===e?void 0:e.pages.flatMap(e=>e.result)},[s.data]);return{...s,data:d}}let f=(e,t)=>["active-sessions",e,t],p=e=>{let{orgId:t,isSignedIn:n}=(0,u.aC)(),i=f(t,e),s=(0,r.N)({queryKey:i,enabled:!!n,initialPageParam:void 0,queryFn:t=>{let{pageParam:n}=t;return(0,l.Rx)(e,n,!0,!1)},getNextPageParam:e=>null==e?void 0:e.next_cursor,getPreviousPageParam:e=>null==e?void 0:e.prev_cursor,retry:!1,refetchInterval:2e4});(0,o.h)(i.join("-"),s);let c=(0,a.useMemo)(()=>{var e;return null===(e=s.data)||void 0===e?void 0:e.pages.flatMap(e=>e.result)},[s.data]);return{...s,data:c}},v=(e,t)=>["session",t,e];function h(e){let{orgId:t,isLoaded:n}=(0,u.aC)();return(0,i.a)({queryKey:v(e,t),enabled:!!(n&&e),queryFn:()=>(0,l.y4)(e)})}let g=["new","claimed","running","resuming"],_=["error","exit","suspended"],y=()=>{let e=(0,s.NL)(),{orgId:t}=(0,u.aC)();return(0,a.useCallback)((n,r)=>{let i=v(n,t),s=e.getQueryData(i);if(s){let t=r(s);e.setQueryData(i,t)}let a=c(t,void 0),u=f(t,void 0);m(e,u,a,n,r,e=>_.includes(e.status))||m(e,a,u,n,r,e=>g.includes(e.status))},[e,t])};function m(e,t,n,r,i,s){let a=e.getQueryData(t);if(!a)return!1;let u=!1,o=null,l={...a,pages:a.pages.map(e=>({...e,result:e.result.map(e=>{if(e.devin_id===r){u=!0;let t=i(e);return s(t)&&(o=t),t}return e}).filter(e=>e.devin_id!==(null==o?void 0:o.devin_id))}))};if(u&&(e.setQueryData(t,l),o)){var c,d;let t=(c=e.getQueryData(n),d=o,c?{...c,pages:[{...c.pages[0],result:[d,...c.pages[0].result]},...c.pages.slice(1)]}:{pages:[{next_cursor:null,prev_cursor:null,result:[d]}],pageParams:[void 0]});e.setQueryData(n,t)}return u}let b=()=>{let{orgId:e,isLoaded:t}=(0,u.aC)();return(0,i.a)({queryKey:["confirmationCriteria",e],enabled:!!(t&&e),queryFn:()=>(0,l.Cl)()})}},55076:function(e,t,n){"use strict";n.d(t,{cX:function(){return i},ed:function(){return d.ed},I0:function(){return s},Wq:function(){return u.Wq},dL:function(){return o},aC:function(){return u.aC},VX:function(){return c}});let r="devin-",i=e=>e.startsWith(r)?e:"".concat(r).concat(e),s=e=>e.startsWith(r)?e.substring(r.length):e;var a=n(7653),u=n(57568);function o(e){let t=(0,u.aH)(e),n=(0,u.L_)(e);return{data:(0,a.useMemo)(()=>l([...t.data||[],...n.data||[]].filter((e,t,n)=>t===n.findIndex(t=>t.devin_id===e.devin_id))),[t.data,n.data]),isLoading:t.isLoading||n.isLoading}}let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((e,t)=>{var n,r;return((null===(n=e.latest_message_contents)||void 0===n?void 0:n.timestamp)||e.updated_at)>((null===(r=t.latest_message_contents)||void 0===r?void 0:r.timestamp)||t.updated_at)?-1:1})},c=(e,t)=>{let{lastMessageEvent:n,lastStatusUpdate:r,lastLoopEvent:i}=e};var d=n(27265)},27265:function(e,t,n){"use strict";n.d(t,{Cl:function(){return f},NA:function(){return p},Rg:function(){return h},Rx:function(){return u},Yc:function(){return c},ed:function(){return l},fi:function(){return v},iW:function(){return i},io:function(){return d},k:function(){return g},y4:function(){return o}});var r,i,s=n(29484),a=n(13415);async function u(e,t,n,r){let i={};return e&&(i.content=e),t&&(i.cursor=t),n&&(i.status_active=n),r&&(i.status_inactive=r),await s.L.get("sessions",{searchParams:i}).json()}async function o(e){return e?{...await s.L.get("sessions/".concat(e),{retry:0}).json(),id:e}:null}async function l(e,t,n,r,i,u,o,l){let c={user_message:e,username:t,playbook_id:i};return c.custom_ami_id=n,c.snapshot_id=r,c.orchestrator_id=u,o&&o===a.n.SPARKOPS&&(c.custom_devin=o),o&&o===a.n.UNITY_CATALOG&&(c.additional_args={unity_catalog:"on"}),o&&o===a.n.DEVIN_LITE&&(c.additional_args={speed:"fast"}),o&&o===a.n.DEVIN_ZERO&&(c.additional_args={devin_zero:"on"}),l&&(c.slack_channel_id=l),await s.L.post("sessions",{json:c}).json()}async function c(e,t){return await s.L.post("verify/".concat(t),{json:e}).json()}async function d(e,t){await s.L.post("criteria/".concat(t,"/session/").concat(e))}async function f(){return await s.L.get("criteria").json()}async function p(e){return await s.L.post("criteria",{json:e}).json()}async function v(e){return await s.L.put("criteria/".concat(e.id),{json:e}).json()}async function h(e){await s.L.delete("criteria/".concat(e))}async function g(e){return await s.L.get("verifier_results/".concat(e)).json()}(r=i||(i={})).EVAL_PROMPT="eval_prompt",r.EDIT_EVAL_PROMPT="edit_eval_prompt",r.EVAL_COMMAND="eval_command"},23269:function(e,t,n){"use strict";n.d(t,{uS:function(){return y},h8:function(){return d},pg:function(){return h},DA:function(){return v},Pc:function(){return p}});var r=n(2560),i=n(26821),s=n(73822),a=n(4652),u=n(29484);let o=async()=>await u.L.get("users/info").json(),l=async e=>await u.L.put("users/info",{json:{onboarding_status:e.onboarding_status,name:e.name,seen_discord_action:e.seen_discord_action}}),c=async e=>await u.L.get("users/".concat(e)).json(),d=async e=>{await u.L.delete("users/".concat(e))},f=e=>["userInfo",e],p=()=>{let{isLoaded:e,userId:t}=(0,a.aC)();return(0,r.a)({queryKey:f(t),queryFn:o,enabled:e&&!!t})};function v(){let{userId:e}=(0,a.aC)(),t=(0,i.NL)();return(0,s.D)({mutationFn:l,onSuccess:()=>{t.invalidateQueries({queryKey:f(e)})}})}let h=()=>{let{userId:e}=(0,a.aC)();return(0,r.a)({queryKey:["user",e],queryFn:async()=>await c(e),enabled:!!e})};var g=n(67754),_=n(7653);let y=e=>{let{children:t}=e,{data:n}=p(),r=(0,g.useRouter)();return(0,_.useEffect)(()=>{n&&"in_progress"===n.onboarding_status&&r.push("/onboarding")},[n,r]),t}},13415:function(e,t,n){"use strict";var r,i;n.d(t,{n:function(){return r}}),(i=r||(r={})).DEVIN="devin",i.DEVIN_LITE="devin-lite",i.DEVIN_ZERO="devin-zero",i.MULTI_DEVIN="multiDevin",i.SPARKOPS="devin-sparkop-0607",i.UNITY_CATALOG="unity-catalog"},94873:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var r=n(57908),i=n(66290);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,r.W)(t))}},22628:function(){}}]);