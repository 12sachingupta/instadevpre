!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6b571b17-c846-439a-a398-4907c1c6fd28",e._sentryDebugIdIdentifier="sentry-dbid-6b571b17-c846-439a-a398-4907c1c6fd28")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{91854:function(e,t,s){s.d(t,{T:function(){return l}});var a=s(27573),i=s(56969),r=s(57908);s(7653);let l=e=>{let{title:t,description:s,onConfirm:l,confirmLabel:n,onCancel:c,cancelLabel:d,open:o,submitColor:m="bg-red-500 hover:bg-red-600"}=e;return(0,a.jsx)(i.fC,{open:o,children:o&&(0,a.jsxs)(i.h_,{children:[(0,a.jsx)(i.aV,{className:"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/55"}),(0,a.jsxs)(i.VY,{className:"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] dark:bg-night fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-1 border bg-white p-6 text-black shadow-lg duration-200 sm:rounded-lg dark:border-[#484848] dark:text-white",children:[(0,a.jsx)(i.Dx,{className:"space-y-1.5 text-center text-lg font-semibold leading-snug tracking-[0.001em] sm:text-left",children:t}),(0,a.jsx)(i.dk,{className:"text-muted-foreground text-sm tracking-[0.015em] dark:text-white",children:s}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2 text-sm",children:[c&&(0,a.jsx)(i.$j,{asChild:!0,children:(0,a.jsx)("button",{className:"rounded-md border px-4 py-1.5 duration-150 hover:bg-gray-100 dark:border-white dark:hover:border-blue-500 dark:hover:bg-transparent dark:hover:text-blue-500",onClick:c,children:"".concat(null!=d?d:"Cancel")})}),l&&(0,a.jsx)(i.aU,{asChild:!0,children:(0,a.jsx)("button",{className:(0,r.Z)("rounded-md border-transparent px-4 py-1.5 text-white duration-150",m),onClick:l,children:"".concat(null!=n?n:"Confirm")})})]})]})]})})}},54550:function(e,t,s){s.d(t,{h:function(){return l}});var a=s(27573),i=s(57908),r=s(61802);let l=e=>{let{children:t,loading:s,className:l}=e;return s?(0,a.jsx)("div",{className:(0,i.Z)("flex items-center justify-center align-middle",l),children:(0,a.jsx)(r.g,{})}):(0,a.jsx)(a.Fragment,{children:t})}},61802:function(e,t,s){s.d(t,{g:function(){return r}});var a=s(27573),i=s(51430);let r=e=>{let{weight:t="regular",size:s=26}=e;return(0,a.jsx)("div",{className:"flex h-full flex-auto flex-col items-center justify-center px-4 text-center align-middle",children:(0,a.jsx)("div",{className:"text-[#6096FF]",children:(0,a.jsx)(i.U,{size:s,weight:t,className:"animate-spin"})})})}},19771:function(e,t,s){s.d(t,{T:function(){return r}});var a=s(27573),i=s(51430);let r=e=>{let{size:t,noText:s=!1}=e;return(0,a.jsxs)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 flex-col items-center px-4 text-center",children:[(0,a.jsx)("div",{className:"mb-6 text-[#6096FF]",children:(0,a.jsx)(i.U,{size:"sm"===t?22:"md"===t?32:48,className:"animate-spin"})}),!s&&(0,a.jsx)("h1",{className:"text-".concat(t," mt-2 text-neutral-600 sm:mt-0 dark:text-white"),children:"Loading..."})]})}},74011:function(e,t,s){var a=s(27573),i=s(61597),r=s(95014),l=s(57908),n=s(18255),c=s.n(n);s(7653),t.Z=e=>{let{currentPage:t,totalPages:s,handlePageChange:n}=e;return(0,a.jsxs)("div",{className:"mt-10 flex items-center justify-center text-gray-600 dark:text-white",children:[(0,a.jsx)("button",{className:"mr-2 hover:text-gray-500 dark:hover:text-[#bbbbbb]",disabled:1===t,onClick:()=>n(t-1),children:(0,a.jsx)(i.W,{size:12})}),(0,a.jsxs)("ul",{className:"flex space-x-2",children:[t>=3&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"h-8 w-8 rounded border border-transparent text-xs hover:border-gray-500 hover:text-gray-500 dark:hover:border-[#bbbbbb] dark:hover:text-[#bbbbbb]",onClick:()=>n(1),children:"1"})}),t>3&&(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"h-8 w-8 rounded text-xs",disabled:!0,children:"..."})})]}),c().range(Math.max(t-2,0),Math.min(t+2,s)).map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:(0,l.Z)("h-8 w-8 rounded text-xs",t===e+1?"border border-[currentColor]":"border border-transparent hover:border-gray-500 hover:text-gray-500 dark:hover:border-[#bbbbbb] dark:hover:text-[#bbbbbb]"),onClick:()=>n(e+1),children:e+1})},e)),t<=s-3&&(0,a.jsxs)(a.Fragment,{children:[t<s-3&&(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"h-8 w-8 rounded text-xs",disabled:!0,children:"..."})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"h-8 w-8 rounded border border-transparent text-xs hover:border-gray-500 hover:text-gray-500 dark:hover:border-[#bbbbbb] dark:hover:text-[#bbbbbb]",onClick:()=>n(s),children:s})})]})]}),(0,a.jsx)("button",{className:"ml-2 hover:text-gray-500 dark:hover:text-[#bbbbbb]",disabled:t===s,onClick:()=>n(t+1),children:(0,a.jsx)(r.T,{size:12})})]})}},52635:function(e,t,s){s.d(t,{j:function(){return i}});var a,i,r=s(69116);s(68571).env.NEXT_PUBLIC_ANALYTICS_DEBUG;let l="aa9299deefd3b5def0b35dd5901db7a4";(a=i||(i={})).LOGIN="Login",a.LEARN_MORE="Learn More",a.TOGGLE_COLLAPSE_SIDEBAR="Collapse Sidebar",a.ADD_SECRET_OPEN_FORM="Add Secret Open Form",a.ADD_SECRET="Add Secret",a.DELETE_SECRET="Delete Secret",a.VIEW_SECRET="View Secret",a.TOGGLE_DESKTOP_NOTIFICATIONS="Toggle Desktop Notifications",a.TOGGLE_SLACK_NOTIFICATIONS="Toggle Slack Notifications",a.VIEW_PLAYBOOK="View Playbook",a.CREATE_PLAYBOOK="Create Playbook",a.DELETE_PLAYBOOK="Delete Playbook",a.CREATE_KNOWLEDGE="Create Knowledge",a.DELETE_KNOWLEDGE="Delete Knowledge",a.VIEW_KNOWLEDGE="View Knowledge",a.VIEW_KNOWLEDGE_EVENT="View Knowledge Event",a.ACCEPT_KNOWLEDGE_SUGGESTION="Accept Knowledge Suggestion",a.REJECT_KNOWLEDGE_SUGGESTION="Reject Knowledge Suggestion",a.EDIT_KNOWLEDGE_SUGGESTION="Edit Knowledge Suggestion",a.UPLOAD_FILE="Upload File",a.UPLOAD_PLAYBOOK="Upload Playbook",a.PROVIDE_CREDENTIALS="Provide Credentials",a.SEND_MESSAGE="Send Message",a.START_NEW_SESSION="Start New Session",a.CHAT_HISTORY_VIEW_SHELL_UPDATES="Chat History View Shell Updates",a.CHAT_HISTORY_VIEW_CODE_UPDATES="Chat History View Code Updates",a.CHAT_HISTORY_COPY_MESSAGE="Chat History Copy Message",a.SHARE_SESSION="Share Session",a.PAUSE_SESSION="Pause Session",a.TERMINATE_SESSION="Terminate Session",a.VSCODE="VSCode",a.CREATE_SNAPSHOT="Create Snapshot",a.TOGGLE_WORK_VIEW="Toggle Work View",a.EXPAND_WORKSPACE="Expand Workspace",a.VIEW_GLOBAL_WORK_DIFF="View Global Work Diff",a.VIEW_FILE_DIFF_HISTORY="View File Diff History",a.DOWNLOAD_CHANGES="Download Changes",a.VIEW_SHELL_HISTORY="View Shell History",a.USE_DEVINS_BROWSER="Use Devins Browser",a.EDITOR_EXPAND="Expand Editor",a.EDITOR_TOGGLE_DIFF="Editor Toggle Diff",a.EDITOR_VIEW_GLOBAL_WORK_DIFF="Editor View Global Work Diff",a.EDITOR_DOWNLOAD_FILES="Editor Download Files",a.HISTORY_PREVIOUS="History Previous",a.HISTORY_NEXT="History Next",a.HISTORY_REWIND="History Rewind",a.HISTORY_FASTFORWARD="History Fast Forward",a.HISTORY_LIVE="History Live",a.RESTORE_CHECKPOINT="Restore Checkpoint",a.SHOW_WORK_LOG="Show Work Log";class n{initialize(){l&&(r.init(l,{defaultTracking:{sessions:!0}}),this.amplitude=r)}track(e,t){this.amplitude&&this.amplitude.getUserId()&&this.amplitude.track(e,t)}setUser(e,t){if(this.amplitude&&(this.amplitude.setUserId(e),t))try{let e=new this.amplitude.Identify;Object.entries(t).forEach(t=>{let[s,a]=t;e.set(s,a)}),this.amplitude.identify(e)}catch(e){}}trackInteraction(e){this.track(e,{interaction:e})}}let c=new n;t.Z=c},70748:function(e,t,s){s.d(t,{EH:function(){return ey},j9:function(){return ez},BB:function(){return e_},lO:function(){return H},cd:function(){return eW}});var a=s(27573),i=s(99994),r=s(23130),l=s(7653),n=s(86235),c=s(9054),d=s(91854),o=s(61802),m=s(74011),u=s(52635),x=s(4652),h=s(53358),f=s(2174),p=s(96268),g=s(11360),b=s(18914),j=s(51430),v=s(18544),N=s(77059),y=s(57908),w=s(87659),k=s(52111),S=s(45660),C=s(21138),E=s(1794);let _={cookie:"Cookie","key-value":"Plain Text",dictionary:"Key-Value",totp:"One-Time Password (TOTP)"},A=e=>{let{open:t,onOpenChanged:s,onSuccess:i}=e;return(0,a.jsx)(C.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(C.cZ,{className:"outline-none sm:max-w-[685px]",children:[(0,a.jsx)(C.fK,{children:(0,a.jsx)(C.$N,{className:"mb-1 text-xl tracking-tight",children:"Add new secret"})}),(0,a.jsx)("div",{className:"flex flex-col space-y-2.5 ",children:(0,a.jsx)(F,{onSuccess:i})})]})})},T="flex justify-between items-end ",O="text-[0.8rem]",I="text-xs text-right",D="mb-6 min-w-full rounded-sm text-[0.8rem] leading-8 pl-2 resize-none dark:border-none border",F=e=>{let{onSuccess:t}=e,[s,i]=(0,l.useState)(""),[r,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)("key-value"),{data:o}=(0,E.o8)(),[m,u]=(0,l.useState)(!0),[x,h]=(0,l.useState)({name:!1}),[f,g]=(0,l.useState)([{key:"",value:"",sensitive:!0}]),v=(0,l.useCallback)(async e=>(await p.Yo.get(e)||[]).length>0,[]),w=(0,l.useCallback)(e=>/^otpauth:\/\/totp\/.+$/.test(e),[]),C=(0,l.useCallback)(async e=>{if(e.preventDefault(),r)return;let s=new FormData(e.currentTarget),a=s.get("key"),l=s.get("type"),d=s.get("value");if("dictionary"===l)d=JSON.stringify(f);else if("totp"===l&&!w(d)){i("The TOTP value must be of the format: otpauth://totp/ExampleUser:alice@google.com?secret=JBSWY3DPEHPK3PXP&issuer=ExampleIssuer.");return}try{if(i(""),n(!0),await v(a)){h({name:!0});return}let e="dictionary"!==c&&m,{id:s}=await p.Yo.create(l,a,d,e);t({id:s,key:a,value:d,type:l,sensitive:e,user_id:"",created_at:Date.now()})}catch(e){i(e.message||"An error occurred")}finally{n(!1)}},[t,v,r,f,w,m,c]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R,{type:c,organization:null==o?void 0:o.display_name}),(0,a.jsxs)(N.fC,{className:"items border-gr min-w-full ",onSubmit:C,onClearServerErrors:()=>h({name:!1}),"aria-disabled":!0,children:[s&&(0,a.jsxs)(k.b,{status:"error",className:"mb-8",children:["There was a problem submitting your request. ",s]}),(0,a.jsx)(N.gN,{name:"type",children:(0,a.jsxs)("div",{className:"flex flex-col items-baseline justify-between",children:[(0,a.jsx)(N.__,{className:O,children:"Type"}),(0,a.jsx)(N.oT,{asChild:!0,disabled:r,children:(0,a.jsxs)("select",{className:"mb-6 block w-full rounded-sm border bg-gray-50 px-2 py-1.5 text-[0.8rem] leading-8 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-none dark:bg-[#4d4d4d] dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",required:!0,defaultValue:c,onChange:e=>d(e.target.value),children:[(0,a.jsx)("option",{value:"cookie",children:"Cookie (BETA)"}),(0,a.jsx)("option",{value:"key-value",children:_["key-value"]}),(0,a.jsx)("option",{value:"dictionary",children:_.dictionary}),(0,a.jsxs)("option",{value:"totp",children:[_.totp," (BETA)"]})]})})]})}),(0,a.jsxs)(N.gN,{name:"key",serverInvalid:x.name,children:[(0,a.jsxs)("div",{className:T,children:[(0,a.jsx)(N.__,{className:O,children:"Name"}),(0,a.jsxs)("div",{className:"flex flex-col text-red-500 [&>*]:mb-1",children:[(0,a.jsx)(N.v0,{className:I,match:"valueMissing",children:"Required"}),(0,a.jsx)(N.v0,{match:"badInput",forceMatch:x.name,className:I,children:"Secret name must be unique"})]})]}),(0,a.jsx)(N.oT,{asChild:!0,disabled:r,onChange:()=>h(e=>({...e,name:!1})),children:(0,a.jsx)("input",{className:D,type:"text",required:!0,maxLength:255,autoComplete:"off"})})]}),"cookie"===c&&(0,a.jsxs)(N.gN,{name:"value",children:[(0,a.jsxs)("div",{className:T,children:[(0,a.jsx)(N.__,{className:O,children:"Value"}),(0,a.jsxs)("div",{className:"flex flex-col [&>*]:mb-1",children:[(0,a.jsx)(N.v0,{className:I,match:"valueMissing",children:"Required"}),(0,a.jsx)(N.v0,{match:e=>!P(e),className:I,children:"Value has to be a base64 encoded string"}),(0,a.jsxs)(N.v0,{match:e=>!V(e),className:I,children:[(0,a.jsx)("div",{children:"Cookies have to be a valid JSON object"}),(0,a.jsx)("div",{children:"Multiple cookies separated with semicolons"})]})]})]}),(0,a.jsx)(N.oT,{asChild:!0,disabled:r,children:(0,a.jsx)("input",{className:D,type:"text",required:!0,autoComplete:"off"})})]}),("key-value"===c||"totp"===c)&&(0,a.jsxs)(N.gN,{name:"value",children:[(0,a.jsxs)("div",{className:T,children:[(0,a.jsx)(N.__,{className:O,children:"Value"}),(0,a.jsx)(N.v0,{className:I,match:"valueMissing",children:"Required"})]}),(0,a.jsx)(N.oT,{asChild:!0,disabled:r,children:(0,a.jsx)("textarea",{rows:4,className:(0,y.Z)("py-2 !leading-6",D),required:!0,autoComplete:"off"})})]}),"dictionary"===c&&(0,a.jsxs)("div",{className:"mb-4 flex w-full flex-col items-start justify-start",children:[f.map((e,t)=>(0,a.jsx)(L,{index:t,kvPair:e,canDelete:0!==t,isLoading:r,setKvPair:(e,t,s,a)=>{let i=[...f];i[e]={key:t,value:s,sensitive:a},g(i)},deleteKv:()=>{let e=[...f];e.splice(t,1),g(e)}},t)),(0,a.jsx)("div",{className:"flex w-full items-end justify-end",children:(0,a.jsx)("button",{className:"text-2xl dark:text-white",type:"button",onClick:()=>g([...f,{key:"",value:"",sensitive:!0}]),children:(0,a.jsx)(b.F,{size:22})})})]}),(0,a.jsx)("div",{className:"dark:border-input-dark mx-auto my-2 h-1 w-1/2 border-t"}),(0,a.jsxs)("div",{className:"mb-4 flex w-full items-start pt-4",children:[(0,a.jsxs)("div",{className:"flex w-3/5 flex-col",children:[(0,a.jsx)("span",{className:"text-sm",children:"Sensitive"}),(0,a.jsx)("span",{className:"text-xs opacity-70",children:"Secrets marked as Sensitive cannot be retrieved by any user and are redacted from Devin's workspace and user interfaces."})]}),"dictionary"!==c&&(0,a.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,a.jsx)("span",{className:"mr-2 text-xs",children:m?"Enabled":"Disabled"}),(0,a.jsx)(S.r,{checked:m,onCheckedChange:()=>u(e=>!e)})]})]}),(0,a.jsx)("div",{className:"flex flex-row items-end justify-end align-middle",children:(0,a.jsxs)(N.k4,{className:"bg-pacific w-20 rounded-md px-4 py-1 text-white hover:bg-blue-500 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-600",disabled:r,children:[!r&&(0,a.jsx)("span",{className:"text-sm",children:"Add"}),r&&(0,a.jsx)("div",{className:"flex justify-center text-sm",children:(0,a.jsx)(j.U,{size:24,className:"animate-spin"})})]})})]})]})},L=e=>{let{index:t,kvPair:s,setKvPair:i,deleteKv:r,canDelete:l,isLoading:n}=e;return(0,a.jsxs)("div",{className:"flex w-full flex-row items-center space-x-4 pb-4 align-middle",children:[(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(N.gN,{name:"dictionary-key-".concat(t),children:[(0,a.jsxs)("div",{className:T,children:[(0,a.jsx)(N.__,{className:O,children:"Key"}),(0,a.jsx)(N.v0,{className:I,match:"valueMissing",children:"Required"})]}),(0,a.jsx)(N.oT,{asChild:!0,disabled:n,children:(0,a.jsx)("input",{type:"text",className:(0,y.Z)("!mb-0",D),required:!0,value:s.key,onChange:e=>i(t,e.target.value,s.value,s.sensitive),autoComplete:"off"})})]})}),(0,a.jsx)("div",{className:"w-full ",children:(0,a.jsxs)(N.gN,{name:"dictionary-value-".concat(t),children:[(0,a.jsxs)("div",{className:T,children:[(0,a.jsx)(N.__,{className:O,children:"Value"}),(0,a.jsx)(N.v0,{className:I,match:"valueMissing",children:"Required"})]}),(0,a.jsx)(N.oT,{asChild:!0,disabled:n,children:(0,a.jsx)("input",{type:"text",className:(0,y.Z)("!mb-0",D),value:s.value,required:!0,onChange:e=>i(t,s.key,e.target.value,s.sensitive),autoComplete:"off"})})]})}),(0,a.jsxs)("div",{className:"w-min",children:[(0,a.jsx)("div",{className:T,children:(0,a.jsx)("label",{className:O,children:"Sensitive?"})}),(0,a.jsx)("div",{className:"flex h-8 items-center justify-center",children:(0,a.jsx)(S.r,{checked:s.sensitive,onCheckedChange:e=>i(t,s.key,s.value,e),disabled:n})})]}),(0,a.jsx)("button",{className:"mt-4 dark:text-white",onClick:()=>r(),disabled:!l,children:(0,a.jsx)(v.S,{size:22})})]})},R=e=>{let{type:t,organization:s}=e;return(0,a.jsxs)("div",{className:"mx-0.5 pb-4 text-sm tracking-wide text-slate-800 dark:text-slate-200",children:[(0,a.jsxs)("div",{children:["This ",_[t]," secret will be available in all"," ",s?"future sessions within the ".concat(s," organization."):"of your future personal sessions."]}),(0,a.jsx)("div",{className:"mt-1.5 font-medium tracking-normal",children:"This secret will not be available to Devin sessions started before the secret was created."}),"cookie"===t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"mb-2 mt-6",children:["Learn more how to work with cookies"," ",(0,a.jsx)(w.default,{href:"https://docs.devin.ai/Onboard_Devin/secrets#adding-a-new-site-cookie",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"here."})]})})]})},P=e=>{try{let t=atob(e);return btoa(t)===e}catch(e){return!1}},V=e=>{try{let t=atob(e),s=[],a=0;for(;a<t.length;){let e=t.indexOf("};{",a);if(-1===e)break;s.push(e+1),a=e+1}s.push(t.length);let i=0;for(let e of s){let s=t.slice(i,e);JSON.parse(s.trim()),i=e+1}return!0}catch(e){return!1}};var z=s(2560),G=s(54154),Z=s(54550);let M=e=>{let{id:t,open:s,onOpenChanged:i}=e,{data:r,error:l,isLoading:n,refetch:c}=(0,z.a)({queryKey:["secret-".concat(t)],enabled:!!t,queryFn:async()=>{if(t)return p.Yo.getById(t)}});if(t)return(0,a.jsx)(C.Vq,{open:s,onOpenChange:i,children:(0,a.jsxs)(C.cZ,{className:"dark:bg-night border-transparent outline-none sm:max-w-[655px] dark:text-white",children:[(0,a.jsx)(C.fK,{children:(0,a.jsx)(C.$N,{className:"mb-1 text-xl tracking-tight",children:"Secret Value"})}),(0,a.jsx)("div",{className:"min-h-60",children:(0,a.jsx)(Z.h,{loading:n,children:(0,a.jsx)(U,{secret:r,error:!!l,refetch:c})})})]})})},U=e=>{let{secret:t,error:s,refetch:i}=e;if(s)return(0,a.jsx)(k.b,{status:"error",children:"Failed to fetch secret. Please try again later"});if(!t)return;let{key:r,created_at:l,type:n}=t;return(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold",children:"Created at"}),(0,a.jsx)("div",{children:(0,g.x)(l)})]}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold",children:"Name"}),(0,a.jsx)("div",{children:r})]}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("div",{className:"mb-1 flex items-center font-semibold",children:[(0,a.jsx)("div",{className:"mr-2 flex-[3]",children:"Value"}),"dictionary"===n&&(0,a.jsx)("div",{className:"ml-2 flex-[3]",children:"Key"}),"dictionary"===n&&(0,a.jsx)("div",{className:"ml-2 flex flex-[1] justify-center",children:"Sensitive"})]}),(0,a.jsx)(K,{secret:t,refetch:i})]})]})},K=e=>{let{secret:t,refetch:s}=e,[i,r]=(0,l.useState)({}),{sensitive:n,type:c,value:d,id:o}=t,m=n||Object.values(i).some(Boolean);if("dictionary"!==c)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:m?"password":"text",value:m?btoa(d):d,readOnly:!0,className:(0,y.Z)("max-h-96 w-[570px] overflow-scroll break-words outline-none","key-value"===c?"whitespace-pre":"")}),(0,a.jsx)(W,{sensitive:n,id:o,setSensitiveWarnings:r,sensitiveWarnings:i,refetch:s,isDictionary:!1})]});let u=JSON.parse(d);return(0,a.jsxs)("div",{className:"max-h-96 md:w-[600px]",children:[u.map((e,t)=>{let s=e.sensitive||i[e.key]||n;return(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"mr-2 w-full flex-[3] resize-none overflow-scroll rounded-sm border border-[#8f8f8f] pl-2 text-[0.8rem] leading-8",children:e.key}),(0,a.jsx)("input",{type:s?"password":"text",value:s?btoa(e.value):e.value,disabled:!0,className:"w-full flex-[3] resize-none overflow-scroll rounded-sm border border-[#8f8f8f] bg-transparent pl-2 text-[0.8rem] leading-8",readOnly:!0}),(0,a.jsx)("div",{className:"flex flex-[1] justify-center",children:(0,a.jsx)(S.r,{checked:s,onCheckedChange:()=>r(t=>({...t,[e.key]:!t[e.key]})),disabled:e.sensitive||n})})]},t)}),(0,a.jsx)(W,{sensitive:n,id:o,setSensitiveWarnings:r,sensitiveWarnings:i,refetch:s,isDictionary:!0})]})},W=e=>{let{sensitive:t,id:s,setSensitiveWarnings:i,sensitiveWarnings:r,refetch:n,isDictionary:c}=e,[d,o]=(0,l.useState)(!1),m=async()=>{try{let e=await p.Yo.setSecretSensitivity(s,c?Object.fromEntries(Object.entries(r).filter(e=>{let[,t]=e;return t})):null);await n(),o(!0),G.A.success(e.message)}catch(e){G.A.error("Failed to update secret sensitivity"),console.error(e)}i({})},u=t||Object.values(r).some(Boolean)||d;return(0,a.jsxs)("div",{className:"flex w-full flex-col items-end",children:[(0,a.jsxs)("div",{className:"flex w-full items-center pt-4",children:[(0,a.jsxs)("div",{className:(0,y.Z)("flex flex-col",c?"w-full":"w-3/5"),children:[!c&&(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Sensitive"}),Object.values(r).some(Boolean)&&!d&&(0,a.jsx)("span",{className:"text-xs text-red-500 opacity-70",children:"Click Save to confirm the changes. This action cannot be undone."})]}),!c&&(0,a.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,a.jsx)("span",{className:"mr-2 text-xs",children:u?"Enabled":"Disabled"}),(0,a.jsx)(S.r,{checked:u,disabled:t||d,onCheckedChange:()=>{i(e=>({global:!e.global})),o(!1)}})]})]}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("button",{onClick:m,disabled:!Object.values(r).some(Boolean)||t,className:(0,y.Z)(Object.values(r).some(Boolean)?"mt-5 h-8 opacity-100":"-z-10 mt-0 h-0 cursor-default opacity-0","bg-pacific w-20 rounded-md px-4 py-1 text-sm text-white duration-150 hover:bg-blue-500 disabled:cursor-default disabled:bg-gray-300 disabled:text-gray-600"),children:"Save"})})]})},H=()=>{let{orgId:e}=(0,x.aC)(),[t,s]=(0,l.useState)(""),[i,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),[h,g]=(0,l.useState)([]),[b,j]=(0,l.useState)(""),{loading:v,error:N}=(0,n.Z)(async()=>{g(await p.Yo.get())},[e]),y=(0,l.useCallback)(e=>{g(t=>[...t||[],e]),c(!1),u.Z.trackInteraction(u.j.ADD_SECRET)},[]),w=(0,l.useCallback)(e=>{g(t=>(t||[]).filter(t=>t.id!==e)),u.Z.trackInteraction(u.j.DELETE_SECRET)},[]),k=(0,l.useCallback)(e=>{j(e),m(!0),u.Z.trackInteraction(u.j.VIEW_SECRET)},[]),S=(0,l.useMemo)(()=>{if(!v)return new r.Z(h,{findAllMatches:!0,keys:["key","type"],minMatchCharLength:1,threshold:.4})},[h,v]),{filteredSecrets:C}=(0,l.useMemo)(()=>{if(!h||!S)return{filteredSecrets:[]};let e=h;return t&&(e=S.search(t).map(e=>e.item)),{filteredSecrets:e}},[S,h,t]),E=(0,l.useMemo)(()=>[{title:"",list:C,value:"secrets"}],[C]);return v?(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center align-middle",children:(0,a.jsx)(o.g,{})}):N?(0,a.jsx)(q,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.yq,{action:"manage",lists:E,searchPlaceholder:"Search secrets",createText:"Add secret",createAction:()=>{u.Z.trackInteraction(u.j.ADD_SECRET_OPEN_FORM),c(!0)},setSearchTerm:s,children:e=>(0,a.jsx)(Y,{secrets:e,onDelete:w,onReveal:k})}),(0,a.jsx)(A,{open:i,onOpenChanged:()=>c(!1),onSuccess:y}),(0,a.jsx)(M,{open:d,onOpenChanged:()=>m(!1),id:b})]})},q=()=>(0,a.jsx)("div",{className:"text-sm",children:"There was an error loading this page. Please try again later."}),Y=e=>{let{secrets:t,onDelete:s,onReveal:i}=e,[r,n]=(0,l.useState)(1),c=10*r,d=t.slice(c-10,c),o=0===t.length,u=Math.ceil(t.length/10);return(0,l.useEffect)(()=>{n(1)},[t]),(0,a.jsxs)("div",{className:"relative flex-1",children:[o&&(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)("span",{className:"text-center text-xs text-[#8F8F8F] dark:text-[#8F8F8F]",children:"No secrets found"})}),!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"",children:(0,a.jsxs)("tr",{className:"text-left text-[10px] dark:text-[#8F8F8F]",children:[(0,a.jsx)("th",{className:"w-[30%] pb-3 pl-3",children:"Type"}),(0,a.jsx)("th",{className:"w-[30%] pb-3",children:"Name"}),(0,a.jsx)("th",{className:"w-[30%] pb-3",children:"Created at"}),(0,a.jsx)("th",{className:"pb-3"})]})}),(0,a.jsx)("tbody",{className:"px-24",children:d.map((e,t)=>(0,a.jsx)(B,{secret:e,onDelete:s,onReveal:i},t))})]}),(0,a.jsx)(m.Z,{currentPage:r,totalPages:u,handlePageChange:n})]})]})},B=e=>{let{secret:t,onDelete:s,onReveal:r}=e,[n,o]=(0,l.useState)(!1),[m,u]=(0,c.Z)(async e=>{await p.Yo.delete(e)}),x=(0,l.useCallback)(async()=>{await u(t.id),s(t.id),o(!1)},[u,t.id,s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{onClick:()=>r(t.id),className:"dark:hover:bg-extra-night cursor-pointer text-xs hover:bg-[#f2f2f2]",children:[(0,a.jsx)("td",{className:"group ml-3 flex items-center justify-start rounded-sm py-3 align-middle font-semibold",children:(0,a.jsx)("span",{className:"line-clamp-1 text-ellipsis break-words",children:_[t.type]})}),(0,a.jsx)("td",{className:"py-3 pr-3 font-semibold dark:text-white",children:t.key}),(0,a.jsx)("td",{className:"py-3 pr-3",children:(0,g.x)(t.created_at)}),(0,a.jsx)("td",{className:"py-1 pr-3",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(h.z,{defaultIcon:(0,a.jsx)(i.r,{size:12}),loading:m.loading,onClick:e=>{e.stopPropagation(),o(!0)},theme:"danger",type:"button",disabled:m.loading})})})]}),(0,a.jsx)(d.T,{open:n,onCancel:()=>o(!1),onConfirm:x,confirmLabel:"Remove Secret",title:"Are you sure you want to remove this secret?",description:"This action cannot be undone."})]})};var $=s(19771),J=s(70987);function X(e){let{children:t,title:s,button:i}=e,r=!s.length;return(0,a.jsxs)("div",{className:"mt-8 flex h-full w-full flex-col items-start border-t border-dashed pt-8 first:mt-0 first:border-none first:pt-0 lg:flex-row dark:border-[#484848]",children:[!r&&(0,a.jsxs)("div",{className:"hidden w-full flex-1 flex-col lg:flex",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:s}),i&&(0,a.jsx)("div",{className:"mt-2",children:i})]}),(0,a.jsx)("div",{className:(0,y.W)("relative flex h-full w-full flex-[2.2] flex-col items-end space-y-6 duration-150 dark:border-[#484848]",r?"border-none pl-0":"border-l-0 lg:border-l lg:pl-12"),children:t})]})}var Q=s(23269);function ee(){let{userId:e}=(0,x.aC)(),[t,s]=(0,l.useState)(!1),i=async()=>{await (0,Q.h8)(e).then(()=>{window.location.href="/"}).catch(()=>{G.A.error("Failed to delete account. Please try again later.")}),s(!1)};return(0,a.jsxs)("div",{className:"flex w-full flex-col items-start md:flex-row md:items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Delete account"}),(0,a.jsx)("div",{className:"pr-6 text-sm font-normal opacity-70",children:"Delete your account and all its associated data"})]}),(0,a.jsxs)("div",{className:"mt-4 md:ml-auto md:mt-0",children:[(0,a.jsx)("button",{onClick:()=>s(!0),className:"rounded-md bg-red-500 px-3 py-2 text-sm text-white duration-150 hover:bg-red-600",children:"Delete account"}),(0,a.jsx)(d.T,{title:"Are you sure you want to delete your account?",description:"This will delete your account and all associated data.",open:t,onCancel:()=>s(!1),onConfirm:i})]})]})}var et=s(81225),es=s(58045),ea=s(32992);let ei=()=>{let[e,t]=(0,es.Z)("allows-devin-notifications",!0);return(0,a.jsx)(el,{title:"Desktop notifications",description:"Devin can leave desktop notifications whenever your input is required, allowing you to leave Devin working unattended.",isDesktopNotifications:!0,allowsNotifications:e||!1,setAllowsNotifications:t})},er=()=>{let[e,t]=(0,es.Z)("allows-get-slack-notifications",!1),{data:s,isLoading:i,refetch:r}=(0,J.F5)();(0,l.useEffect)(()=>{!i&&s&&t(s.notifications_default)},[s,i,t]);let n=async e=>{await (0,ea.Y2)(e),r(),t(e),u.Z.trackInteraction(u.j.TOGGLE_SLACK_NOTIFICATIONS)};return(0,a.jsx)(el,{title:"Slack notifications",description:"By default, authorize Devin to send you a Slack DM when there is an update to one of your sessions. This can be switched off for individual sessions.",isDesktopNotifications:!1,allowsNotifications:e||!1,setAllowsNotifications:n})},el=e=>{let{title:t,description:s,isDesktopNotifications:i,allowsNotifications:r,setAllowsNotifications:n}=e,[c,d]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"flex w-full flex-row justify-stretch pr-6 align-middle",children:[(0,a.jsxs)("div",{className:"flex-grow space-y-2 ",children:[(0,a.jsx)("div",{className:"font-semibold",children:t}),(0,a.jsx)("div",{className:"text-wrap pb-0 pr-4 text-sm font-normal opacity-70 lg:pr-16",children:s}),i&&"denied"===Notification.permission&&(0,a.jsxs)("div",{className:"flex w-full flex-col text-sm font-normal opacity-70 lg:pr-16",children:[(0,a.jsxs)("div",{className:"mb-4 flex",children:[(0,a.jsx)(et.k,{className:"mr-2 h-5 w-5"}),"Notifications for this website are disabled. Here you can find instructions on how to enable them in your browser settings,"]}),(0,a.jsxs)("ul",{className:"ml-12 w-full text-[#6096FF]",children:[(0,a.jsx)("li",{className:"mb-2",children:(0,a.jsx)(w.default,{href:"https://support.google.com/chrome/answer/3220216",target:"_blank",children:"Google Chrome"})}),(0,a.jsx)("li",{className:"mb-2",children:(0,a.jsx)(w.default,{href:"https://support.apple.com/en-eg/guide/safari/sfri40734/mac",target:"_blank",children:"Safari"})}),(0,a.jsx)("li",{children:(0,a.jsx)(w.default,{href:"https://support.mozilla.org/en-US/kb/push-notifications-firefox",target:"_blank",children:"Firefox"})})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[" ","default"===Notification.permission&&i&&(0,a.jsx)(h.z,{disabled:c,onClick:async e=>{e.preventDefault(),d(!0),await Notification.requestPermission(),d(!1),u.Z.trackInteraction(u.j.TOGGLE_DESKTOP_NOTIFICATIONS)},loading:c,theme:"primary",defaultTitle:"Enable"}),("granted"===Notification.permission||!i)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(S.r,{checked:r,onCheckedChange:n,children:(0,a.jsx)("span",{className:"text-[#374151] dark:text-white",children:"Notify me when Devin is blocked or awaiting my input"})})})]})})]})};var en=s(40772),ec=s(77900),ed=s(2366),eo=s(39135),em=s(65880),eu=s(61581),ex=function(e){let{user:t,addAccount:s,setAddAccount:i}=e,r=t.externalAccounts.filter(e=>""!==e.providerUserId).map(e=>e.provider),n=["Google","GitHub"].filter(e=>!r.map(e=>e.toLowerCase()).includes(e.toLowerCase())),[c,d]=(0,l.useState)(""),o=async e=>{await t.createExternalAccount({strategy:"oauth_".concat(e.toLowerCase()),redirectUrl:"/settings"}).then(e=>{var t,s;window.location.href=(null===(s=e.verification)||void 0===s?void 0:null===(t=s.externalVerificationRedirectURL)||void 0===t?void 0:t.toString())||""}).catch(()=>{G.A.error("Error authenticating ".concat(e))}),d("")};return(0,a.jsx)(C.Vq,{open:s,onOpenChange:()=>i(!1),children:(0,a.jsxs)(C.cZ,{className:"outline-none sm:max-w-[625px]",children:[(0,a.jsxs)(C.fK,{children:[(0,a.jsx)(C.$N,{className:"mb-2 text-3xl tracking-tight",children:"Connect External Accounts"}),(0,a.jsx)(C.Be,{className:"mx-0.5 pb-4 tracking-wide",children:"Select a provider to connect your account."})]}),(0,a.jsx)("div",{className:"flex flex-col space-y-2.5 py-4",children:0===n.length?(0,a.jsx)("p",{className:"mx-auto text-sm tracking-wide opacity-80",children:"You have connected all available accounts."}):n.map(e=>{let t="/".concat(e.toLowerCase(),".png");return(0,a.jsxs)("button",{onClick:()=>{d(e),o(e)},className:"dark:hover:bg-extra-night dark:border-input-dark group flex w-full items-center rounded-md border bg-transparent px-4 py-2.5 text-sm font-medium opacity-90 outline-none ring-0 duration-150 hover:bg-gray-100",children:[(0,a.jsx)(em.default,{src:t,alt:e,className:"mr-2 h-4 w-4",width:16,height:16}),(0,a.jsx)("span",{className:"text-sm",children:e}),c===e&&(0,a.jsx)(j.U,{className:"ml-auto h-4 w-4 animate-spin"}),!c&&(0,a.jsx)(eu.Z,{className:"ml-auto mr-2 h-4 w-4 opacity-0 duration-150 ease-in-out group-hover:mr-0 group-hover:opacity-80"})]},e)})})]})})};function eh(){var e;let{user:t}=(0,en.aF)(),[s,i]=(0,l.useState)([]),[r,n]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1),m=(0,l.useCallback)(async()=>{r&&(await r.destroy().then(()=>{(0,G.A)("Account successfully disconnected")}).catch(()=>{(0,G.A)("An error occurred while removing the account.")}),n(null))},[r]);return(0,a.jsxs)("div",{className:"mt-7 flex w-full flex-col space-y-2.5 border-t border-dashed pt-7",children:[c&&(0,a.jsx)(ex,{addAccount:c,setAddAccount:o,user:t}),(0,a.jsx)("div",{className:"font-semibold",children:"Connected Accounts"}),t&&(null===(e=t.externalAccounts)||void 0===e?void 0:e.length)>0?t.externalAccounts.map(e=>{if(!e.providerUserId)return null;let l=s.includes(e.id),c="google"===e.provider,o="github"===e.provider,u=c?e.emailAddress:o?e.username:e.fullName,x="/".concat(e.provider,".png"),h=c?"Google ".concat(e.emailAddress?"(".concat(e.emailAddress,")"):""):o?"GitHub ".concat(e.username?"(".concat(e.username,")"):""):"Slack ".concat(e.fullName?"(".concat(e.fullName,")"):""),f=x?(0,a.jsx)(em.default,{src:x,alt:e.provider,className:"mr-3 h-5 w-5",width:20,height:20}):null;return(0,a.jsxs)("div",{className:"tracking-wide",children:[(0,a.jsxs)("div",{onClick:()=>l?i(t=>t.filter(t=>t!==e.id)):i(t=>[...t,e.id]),className:(0,y.Z)("dark:shadow-night dark:hover:bg-extra-night group flex w-full cursor-pointer items-center rounded-md px-5 py-3 text-sm font-normal text-gray-800 duration-100 hover:bg-gray-100 dark:text-gray-100 dark:hover:shadow-md",l?"dark:bg-extra-night bg-gray-100 dark:shadow-md":"bg-transparent dark:shadow-none"),children:[f,h,(0,a.jsx)(ed.Z,{className:(0,y.Z)("ml-auto h-4 w-4 font-semibold opacity-50 duration-150 group-hover:opacity-100",l?"rotate-180":"")})]}),(0,a.jsx)(ec.E.div,{initial:{opacity:0,height:0},animate:{opacity:l?1:0,height:l?"4.5rem":0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden rounded-b-md px-10",children:(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-3.5",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(em.default,{src:x,alt:"".concat(e.provider," Small Logo"),className:"absolute bottom-0 left-0 h-4 w-4",width:16,height:16}),(0,a.jsx)(em.default,{src:e.imageUrl,alt:"".concat(e.provider," Display Photo"),className:"h-12 w-12 rounded-full",width:48,height:48})]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:u})]})}),!c&&t.externalAccounts.filter(e=>""!==e.providerUserId).length>1&&(0,a.jsx)(ec.E.div,{initial:{opacity:0,height:0},animate:{opacity:l?1:0,height:l?"6.2rem":0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden rounded-b-md px-10",children:(0,a.jsxs)("div",{className:"mt-3 flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Remove"}),(0,a.jsx)("p",{className:"text-sm opacity-60",children:"Remove this connected account from your account"}),(0,a.jsx)("button",{onClick:()=>n(e),className:"w-min whitespace-nowrap pt-2 text-sm tracking-wide text-red-500 duration-100 hover:underline",children:"Remove connected account"}),(0,a.jsx)(d.T,{title:"Are you sure you want to remove this account?",description:"This will remove all integrations with this account.",open:!!r,onCancel:()=>n(null),onConfirm:m})]})})]},e.id)}):(0,a.jsx)("p",{className:"text-gray-500",children:"No connected accounts."}),(0,a.jsx)("span",{onClick:()=>o(e=>!e),className:"relative mx-3 block w-min cursor-pointer text-sm leading-8 text-blue-700 duration-150 after:absolute after:block after:h-[1px] after:w-full after:origin-center after:scale-x-0 after:bg-blue-700 after:transition after:duration-200 after:content-[''] after:hover:scale-x-100 dark:text-blue-600 dark:after:bg-blue-600",children:(0,a.jsxs)("div",{className:"flex items-center whitespace-nowrap px-2 tracking-wide",children:[(0,a.jsx)(eo.Z,{className:"mr-2 h-4 w-4"}),"Connect account"]})})]})}var ef=s(29484);async function ep(e){let t=new FormData;return t.append("file",e),await ef.L.post("users/profile-image",{body:t}).json()}var eg=function(e){let{emailToVerify:t,setEmailToVerify:s,countDown:i,setCountDown:r}=e,[n,c]=(0,l.useState)(!1),[d,o]=(0,l.useState)(Array(6).fill("")),m=(0,l.useRef)(null),u=()=>{m.current&&clearInterval(m.current),m.current=setInterval(()=>{r(e=>e<=1?(clearInterval(m.current),0):e-1)},1e3)};(0,l.useEffect)(()=>{30===i&&u()},[]);let x=async()=>{r(30);try{await t.prepareVerification({strategy:"email_code"}),u(),G.A.success("Verification code sent to ".concat(t.emailAddress))}catch(e){G.A.error("Failed to resend verification code.")}},h=e=>{var t;e.stopPropagation();let s=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text");if(s.length>=1){let e=s.slice(0,6).split(""),t=0,a=[];o(s=>{let i=[...s];for(let s=0;s<i.length&&/^\d$/.test(e[s]);s++)i[s]=e[s],t=s;return a=i,i});let i=document.querySelector('input[name="code-'.concat(t,'"]'));i&&(i.focus(),i.select()),a.every(e=>1===e.length)&&p({code:a.join("")});return}},f=(e,t)=>{let s=e.target.value;if(!/^\d$/.test(s))return;c(!1);let a=[...d];if(a[t]=s,o(a),s&&t<5){let e=document.querySelector('input[name="code-'.concat(t+1,'"]'));e&&(e.focus(),e.select())}a.every(e=>1===e.length)&&p({code:a.join("")})},p=async e=>{let{code:a}=e;try{await t.attemptVerification({code:a}),G.A.success("Email address verified successfully."),s(null)}catch(t){console.error("Error verifying email address:",t),c(!0),G.A.error("Incorrect verification code."),o(["","","","","",""]);let e=document.querySelector('input[name="code-0"]');e&&(e.focus(),e.select())}},g=(e,t)=>{if("Backspace"===e.key&&t>=0){let e=[...d];e[t]="",o(e);let s=document.querySelector('input[name="code-'.concat(t-1,'"]'));s&&(s.focus(),setTimeout(()=>s.select(),0))}};return(0,a.jsx)(C.Vq,{open:null!==t,onOpenChange:()=>s(null),children:(0,a.jsxs)(C.cZ,{className:"outline-none sm:max-w-[425px]",children:[(0,a.jsxs)(C.fK,{children:[(0,a.jsx)(C.$N,{children:"Verification code"}),(0,a.jsxs)(C.Be,{children:["Enter the verification code sent to ",null==t?void 0:t.emailAddress]})]}),(0,a.jsx)("div",{className:"flex justify-center space-x-2 py-4",children:d.map((e,t)=>(0,a.jsx)("input",{name:"code-".concat(t),type:"text",maxLength:1,value:e,onChange:e=>f(e,t),onKeyDown:e=>g(e,t),onPaste:e=>h(e),className:(0,y.Z)("form-input h-10 w-10 rounded border text-center",n?"border-red-400":"border-gray-300"),pattern:"\\d*"},"".concat(t,"-").concat(e)))}),(0,a.jsxs)("button",{onClick:x,disabled:i>0,className:(0,y.Z)("w-min whitespace-nowrap pt-2 text-sm text-blue-600 duration-150",i?"cursor-not-allowed opacity-60":"cursor-pointer opacity-100 hover:underline"),children:["Didn't receive a code? Resend ",i?"(".concat(i,")"):""]})]})})},eb=s(43452);let ej=e=>{let{emailStatus:t}=e,s="primary"===t;return t?(0,a.jsx)("span",{className:(0,y.Z)("ml-3 rounded-md px-2 py-1 text-xs font-medium",s?"bg-blue-200 text-blue-600":"bg-rose-200 text-red-600"),children:s?"Primary":"Unverified"}):null};var ev=e=>{let{email:t,isDropdownOpen:s,setDropdownEmails:i,setEmailToVerify:r,setConfirmRemoveEmail:l,handleRemoveEmail:n,user:c,confirmRemoveEmail:o}=e,m="verified"!==t.verification.status,u=t.id===(null==c?void 0:c.primaryEmailAddressId)?"primary":m?"unverified":"",x=async e=>{await c.update({primaryEmailAddressId:e}),G.A.success("Primary email address updated.")};return(0,a.jsxs)("div",{className:"tracking-wide",children:[(0,a.jsxs)("div",{onClick:()=>s?i(e=>e.filter(e=>e!==t.id)):i(e=>[...e,t.id]),className:"dark:hover:bg-extra-night group flex w-full cursor-pointer items-center rounded-md px-5 py-3 text-sm font-normal text-gray-800 duration-100 hover:bg-gray-100 dark:text-gray-100 dark:hover:shadow-md ".concat(s?"dark:bg-extra-night bg-gray-100 dark:shadow-md":"bg-transparent dark:shadow-none"),children:[t.emailAddress,(0,a.jsx)(ej,{emailStatus:u}),(0,a.jsx)(ed.Z,{className:"ml-auto h-4 w-4 font-semibold opacity-50 duration-150 group-hover:opacity-100 ".concat(s?"rotate-180":"")})]}),m&&(0,a.jsx)(ec.E.div,{initial:{opacity:0,height:0},animate:{opacity:s?1:0,height:s?"6.2rem":0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden rounded-b-md px-10",children:(0,a.jsxs)("div",{className:"mt-3 flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Verify email address"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Complete verification to access all features with this email address"}),(0,a.jsx)("button",{onClick:()=>{r(t),i(e=>e.filter(e=>e!==t.id))},className:"w-min whitespace-nowrap pt-2 text-sm tracking-wide text-blue-600 duration-100 hover:underline",children:"Verify email address"})]})}),(0,a.jsx)(eb.M,{children:s&&(0,a.jsx)(ec.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden rounded-b-md px-10",children:(0,a.jsxs)("div",{className:"mt-3 flex flex-col space-y-3.5",children:["primary"!==u&&(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Set primary"}),(0,a.jsx)("p",{className:"text-sm opacity-60",children:"Set this email address as your primary email address"}),(0,a.jsx)("button",{onClick:()=>x(t.id),className:"w-min whitespace-nowrap py-2 text-sm tracking-wide text-blue-500 duration-100 hover:underline",children:"Set primary address"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Remove"}),(0,a.jsx)("p",{className:"text-sm opacity-60",children:"Delete this email address and remove it from your account"}),(0,a.jsx)("button",{onClick:()=>l(t.id),className:"w-min whitespace-nowrap py-2 text-sm tracking-wide text-red-500 duration-100 hover:underline",children:"Remove email address"}),o===t.id&&(0,a.jsx)(d.T,{title:"Are you sure you want to remove this email address?",description:"This will remove all associated integrations with this email address.",open:o===t.id,onCancel:()=>l(null),onConfirm:()=>n(t)})]})]})})})]},t.id)};function eN(){let{user:e}=(0,en.aF)(),[t,s]=(0,l.useState)((null==e?void 0:e.imageUrl)||"/devin_v4.png"),[i,r]=(0,l.useState)(!1),[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!1),[m,u]=(0,l.useState)([]),[x,h]=(0,l.useState)(null),[f,p]=(0,l.useState)(0),[g,b]=(0,l.useState)(null),j=async t=>{if(e){if(t.preventDefault(),!n.includes("@")){o(!0);return}o(!1);try{let t=await e.createEmailAddress({userId:e.id,email:n,primary:!1});G.A.success("Email address added successfully.",{description:"Check your inbox for a verification code."}),c(""),r(!1);try{await t.prepareVerification({strategy:"email_code"})}catch(e){console.error("Error resending verification code:",e)}p(30),h(t)}catch(e){G.A.error("Failed to add email address."),console.error("Error adding email address:",e)}}},v=async e=>{b(null),await e.destroy(),G.A.warning("Email address removed.")};return(0,a.jsxs)("div",{className:"flex w-full flex-col space-y-8",children:[x&&(0,a.jsx)(eg,{emailToVerify:x,setEmailToVerify:h,countDown:f,setCountDown:p}),(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsx)("div",{className:"font-semibold",children:"User"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{className:"profile-picture-button",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=async e=>{let t=e.target,a=t.files?t.files[0]:null;if(a)try{let e=await ep(a);s(e.url),G.A.success("Profile picture uploaded successfully.")}catch(e){G.A.error("Error uploading profile picture.")}},e.click()},children:(0,a.jsx)(em.default,{src:t,alt:"Profile Picture",className:"profile-picture-image h-14 w-14 rounded-full hover:opacity-75",width:56,height:56})}),(0,a.jsx)("span",{className:"ml-4 text-base font-medium tracking-wide opacity-80 lg:ml-5",children:null==e?void 0:e.fullName})]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2.5",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Email addresses"}),(0,a.jsx)("div",{className:"space-y-0.5",children:null==e?void 0:e.emailAddresses.map(t=>(0,a.jsx)(ev,{email:t,isDropdownOpen:m.includes(t.id),setDropdownEmails:u,setEmailToVerify:h,setConfirmRemoveEmail:b,handleRemoveEmail:v,user:e,confirmRemoveEmail:g},t.id))}),(0,a.jsxs)("form",{className:"flex flex-col",onSubmit:j,children:[(0,a.jsx)(ec.E.div,{initial:{opacity:0,height:0},animate:{opacity:i?1:0,height:i?"10rem":0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"dark:bg-night flex flex-col rounded-md bg-slate-50 px-5 py-4",children:[(0,a.jsx)("label",{className:"mb-1.5 text-sm font-medium",children:"Adding email address"}),(0,a.jsx)("input",{type:"email",className:"w-full rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm outline-none ring-0 duration-150 focus:ring-2 focus:ring-blue-300",value:n,onChange:e=>c(e.target.value)}),(0,a.jsx)("span",{className:"ml-0.5 mt-4 text-sm opacity-80",children:"An email containing a verification code will be sent to this email address."}),(0,a.jsx)("span",{className:(0,y.Z)("ml-0.5 mt-1 text-sm text-red-500 duration-200",d?"h-4 pb-2 opacity-100":"h-0 pb-0 opacity-0"),children:"Please enter a valid email address."})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-0.5",children:[(0,a.jsx)("span",{onClick:()=>r(!i),className:"relative mx-3 block w-min cursor-pointer text-sm leading-8 text-blue-700 duration-150 after:absolute after:block after:h-[1px] after:w-full after:origin-center after:scale-x-0 after:bg-blue-700 after:transition after:duration-200 after:content-[''] after:hover:scale-x-100 dark:text-blue-600 dark:after:bg-blue-600",children:(0,a.jsxs)("div",{className:"flex items-center whitespace-nowrap px-2 tracking-wide",children:[!i&&(0,a.jsx)(eo.Z,{className:"mr-2 h-4 w-4"}),i?"Cancel":"Add email address"]})}),i&&(0,a.jsx)(ec.E.div,{initial:{scaleY:0},animate:{scaleY:1},exit:{scaleY:0},transition:{duration:.25},style:{originY:.5},className:"overflow-hidden",children:(0,a.jsx)("button",{type:"submit",className:"rounded-md bg-blue-700 px-3 py-2 text-sm text-white duration-150 hover:bg-blue-800",children:"Continue"})})]})]})]})]})}let ey=()=>{let{userId:e}=(0,x.aC)(),{user:t}=(0,x.aF)(),{data:s}=(0,J.vz)(e||""),[i,r]=(0,l.useState)(!1),[n,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&c(!0),r("Notification"in window)},[t]);let d=null==s?void 0:s.slack;return n?(0,a.jsxs)("div",{className:"flex w-full flex-col overflow-scroll",children:[(0,a.jsx)(X,{title:"Account",description:"Manage your account information.",button:null,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN,{}),(0,a.jsx)(eh,{})]})}),(i||d)&&(0,a.jsxs)(X,{title:"Notifications",description:"Configure your notification settings.",button:null,children:[i&&(0,a.jsx)(ei,{}),d&&(0,a.jsx)(er,{})]}),(0,a.jsx)(X,{title:"",description:"",button:null,children:(0,a.jsx)(ee,{})})]}):(0,a.jsx)($.T,{size:"md"})},ew=e=>{let{open:t,onOpenChanged:s,onSuccess:i}=e;return(0,a.jsx)(C.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(C.cZ,{className:"outline-none sm:max-w-[625px]",children:[(0,a.jsx)(C.fK,{children:(0,a.jsx)(C.$N,{className:"mb-1 text-xl tracking-tight",children:"Invite members"})}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2.5 ",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"mb-4",children:"Invite new members to this organization"}),(0,a.jsx)("div",{className:"mb-4",children:"Enter or paste one or more email addresses, separated by spaces or commas"})]}),(0,a.jsx)(eC,{onSuccess:i})]})]})})},ek="text-[0.8rem]",eS="text-xs text-right",eC=e=>{let{onSuccess:t}=e,[s,i]=(0,l.useState)(""),[r,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)("org:member"),{mutate:o}=(0,E.bQ)(),m=(0,l.useCallback)(async e=>{if(e.preventDefault(),r)return;let s=new FormData(e.currentTarget),a=s.get("emails").split(/[,\s]+/),l=s.get("role");try{i(""),n(!0),await o({emails:a,role:l}),t()}catch(e){i(e.message||"An error occurred")}finally{n(!1)}},[t,r]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(N.fC,{className:"items border-gr min-w-full ",onSubmit:m,"aria-disabled":!0,children:[s&&(0,a.jsxs)(k.b,{status:"error",className:"mb-8",children:["There was a problem submitting your request. ",s]}),(0,a.jsx)(N.gN,{name:"role",children:(0,a.jsxs)("div",{className:"flex flex-col items-baseline justify-between",children:[(0,a.jsx)(N.__,{className:ek,children:"Role"}),(0,a.jsx)(N.oT,{asChild:!0,disabled:r,children:(0,a.jsxs)("select",{className:"mb-6 block w-full rounded-sm border bg-gray-50 px-2 py-1.5 text-[0.8rem] leading-8 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-none dark:bg-[#4d4d4d] dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",required:!0,defaultValue:c,onChange:e=>d(e.target.value),children:[(0,a.jsx)("option",{value:"org:member",children:"Member"}),(0,a.jsx)("option",{value:"org:admin",children:"Admin"})]})})]})}),(0,a.jsxs)(N.gN,{name:"emails",children:[(0,a.jsxs)("div",{className:"flex justify-between items-end ",children:[(0,a.jsx)(N.__,{className:ek,children:"Email addresses"}),(0,a.jsxs)("div",{className:"flex flex-col [&>*]:mb-1",children:[(0,a.jsx)(N.v0,{className:eS,match:"valueMissing",children:"Required"}),(0,a.jsx)(N.v0,{className:eS,match:e=>!eE(e),children:"Invalid addresses"})]})]}),(0,a.jsx)(N.oT,{asChild:!0,disabled:r,children:(0,a.jsx)("textarea",{rows:4,className:(0,y.Z)("py-2 !leading-6","mb-6 min-w-full rounded-sm text-[0.8rem] leading-8 pl-2 resize-none dark:border-none border"),required:!0,autoComplete:"off"})})]}),(0,a.jsx)("div",{className:"flex flex-row items-end justify-end align-middle",children:(0,a.jsx)(N.k4,{children:(0,a.jsxs)("button",{className:"bg-pacific w-20 rounded-md pb-1 pl-4 pr-4 pt-1 text-white  duration-150 hover:bg-blue-500 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-600",disabled:r,children:[!r&&(0,a.jsx)("span",{className:"text-sm",children:"Add"}),r&&(0,a.jsx)("div",{className:"flex justify-center text-sm",children:(0,a.jsx)(j.U,{size:24,className:"animate-spin"})})]})})})]})})},eE=e=>e.split(/[\s,]+/).filter(e=>e).every(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)),e_=()=>{let[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(!1),{orgId:n,isLoaded:c,userId:d}=(0,x.aC)(),[m,u]=(0,l.useState)(!1),{data:h}=(0,E.o8)(),{data:p,isLoading:g}=(0,E.q5)(),{data:b,isLoading:j}=(0,E.nI)();(0,l.useEffect)(()=>{(null==h?void 0:h.role)&&u((null==h?void 0:h.role.name)==="org:admin")},[h]);let v=(0,l.useMemo)(()=>[{value:"org:admin",label:"Admin"},{value:"org:member",label:"Member"}],[]),N=!c||g||j,y=(d||"").replace("clerk-",""),w=(0,l.useMemo)(()=>{if(g||j)return;let e=m?[...p||[],...b||[]]:p||[];return new r.Z(e,{findAllMatches:!0,keys:["invitee.email","name","email","user_id"],minMatchCharLength:1,threshold:.4})},[p,b,m,g,j]),{users:k,invites:S}=(0,l.useMemo)(()=>{if(!p&&!b||!w)return{users:[],invites:[]};let t=[...p||[],...b||[]];e&&(t=w.search(e).map(e=>e.item));let s=m?t.filter(e=>Object.prototype.hasOwnProperty.call(e,"invitation_url")):[];return{users:t.filter(e=>!Object.prototype.hasOwnProperty.call(e,"invitation_url")),invites:s}},[w,p,b,e,m]),C=(0,l.useMemo)(()=>{let e=[{title:"Members",list:k,value:"members"}];return m&&e.push({title:"Invitations",list:S,value:"invitations"}),e},[k,S,m]);return(null==n?void 0:n.startsWith("personal-"))?(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center align-middle text-sm",children:"Personal accounts don't have members other than yourself. Select or create an Organization to view its member list."}):N?(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center align-middle",children:(0,a.jsx)(o.g,{})}):p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.yq,{action:"manage",lists:C,searchPlaceholder:"Search members",createText:"Add member",createAction:m?()=>i(!0):void 0,setSearchTerm:t,children:(e,t)=>(0,a.jsxs)(a.Fragment,{children:["members"===t&&(0,a.jsx)(eA,{currentUserId:y,users:e,roles:v||[]}),"invitations"===t&&(0,a.jsx)(eO,{invitations:e})]})}),(0,a.jsx)(ew,{open:s,onOpenChanged:()=>i(!1),onSuccess:()=>{i(!1)}})]}):(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center align-middle text-sm",children:"There is no data for the selected organization"})},eA=e=>{let{users:t,roles:s,currentUserId:i}=e,[r,n]=(0,l.useState)(1),c=10*r,d=t.slice(c-10,c),o=0===t.length,u=Math.ceil(t.length/10);return(0,l.useEffect)(()=>{n(1)},[t]),(0,a.jsxs)("div",{className:"relative flex-1",children:[o&&(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)("span",{className:"text-center text-xs text-[#8F8F8F] dark:text-[#8F8F8F]",children:"No users found"})}),!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("table",{className:"w-full table-fixed",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-[10px] dark:text-[#8F8F8F]",children:[(0,a.jsx)("th",{className:"w-[33%] pb-3",children:"Name"}),(0,a.jsx)("th",{className:"w-[33%] pb-3",children:"Email"}),(0,a.jsx)("th",{className:"w-[33%] pb-3",children:"Role"})]})}),(0,a.jsx)("tbody",{children:d.map(e=>(0,a.jsx)(eT,{member:e,currentUserId:i,roles:s},e.user_id))})]}),(0,a.jsx)(m.Z,{currentPage:r,totalPages:u,handlePageChange:n})]})]})},eT=e=>{let{member:t,currentUserId:s,roles:i=[]}=e,{mutate:r}=(0,E.x9)(),n=(0,l.useCallback)(async e=>{try{r({userId:t.user_id,roles:[{id:"",name:e}]}),G.A.success("Role updated successfully")}catch(e){console.error(e),G.A.error("Failed to update role")}},[t,r]),c=(0,l.useMemo)(()=>{var e;return null==i?void 0:null===(e=i.find(e=>e.value===t.roles[0].name))||void 0===e?void 0:e.label},[t.roles,i]);return(0,a.jsxs)("tr",{className:"dark:hover:bg-extra-night cursor-pointer text-xs hover:bg-[#f2f2f2]",children:[(0,a.jsxs)("td",{className:"group flex items-center justify-start rounded-sm py-3 pl-3 pr-3 align-middle font-semibold",children:[(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:t.picture,alt:"profile picture",className:"h-6 w-6 rounded-full"})}),(0,a.jsxs)("span",{className:"ml-2 line-clamp-1 text-ellipsis break-words",children:[t.name,t.user_id===s&&(0,a.jsx)("span",{className:"ml-2 rounded-md bg-blue-100 px-2 text-xs text-blue-600",children:"You"})]})]}),(0,a.jsx)("td",{className:"py-3 pr-3 font-semibold dark:text-white",children:t.email}),(0,a.jsx)("td",{className:"py-1 pr-3",children:(0,a.jsx)("div",{className:"w-full min-w-40",children:(0,a.jsx)(en.Cv,{permission:"org:sys_memberships:manage",fallback:c,children:(0,a.jsx)(h.P,{placeholder:"Role",itemsList:i,defaultValue:t.roles[0].name,onValueChange:n,className:"!h-6"})})})})]})},eO=e=>{let{invitations:t}=e,[s,i]=(0,l.useState)(1),r=10*s,n=t.slice(r-10,r),c=0===t.length,d=Math.ceil(t.length/10);return(0,l.useEffect)(()=>{i(1)},[t]),(0,a.jsxs)("div",{className:"relative flex-1",children:[c&&(0,a.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,a.jsx)("span",{className:"text-center text-xs text-[#8F8F8F] dark:text-[#8F8F8F]",children:"No invitations found"})}),!c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("table",{className:"w-full table-fixed",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-[10px] dark:text-[#8F8F8F]",children:[(0,a.jsx)("th",{className:"w-[30%] pb-3",children:"User"}),(0,a.jsx)("th",{className:"w-[30%] pb-3",children:"Status"}),(0,a.jsx)("th",{className:"w-[30%] pb-3",children:"Role"}),(0,a.jsx)("th",{className:"pb-3"})]})}),(0,a.jsx)("tbody",{children:n.map(e=>(0,a.jsx)(eI,{invite:e},e.id))})]}),(0,a.jsx)(m.Z,{currentPage:s,totalPages:d,handlePageChange:i})]})]})},eI=e=>{let{invite:t}=e,[s,r]=(0,l.useState)(!1),{mutate:n}=(0,E.Rn)(),c=async()=>{try{r(!0),await n(t.id)}finally{r(!1)}};return(0,a.jsxs)("tr",{className:"dark:hover:bg-extra-night cursor-pointer text-xs hover:bg-[#f2f2f2]",children:[(0,a.jsxs)("td",{className:"group flex items-center justify-start rounded-sm py-3 pl-3 pr-3 align-middle font-semibold",children:[(0,a.jsx)("div",{className:"flex items-baseline text-center align-middle",children:(0,a.jsx)("div",{className:"mr-2 mt-1 flex h-6 w-6 items-center justify-center rounded-full bg-gray-400 align-middle uppercase text-white",children:t.invitee.email[0]})}),(0,a.jsx)("span",{className:"ml-2 line-clamp-1 text-ellipsis break-words",children:t.invitee.email})]}),(0,a.jsx)("td",{className:"py-3 pr-3 font-semibold dark:text-white",children:"Pending"}),(0,a.jsx)("td",{className:"py-3 pr-3",children:t.roles.includes("org:admin")?"Admin":"Member"}),(0,a.jsx)("td",{className:"py-1 pr-3",children:(0,a.jsx)(h.z,{defaultIcon:(0,a.jsx)(i.r,{size:12}),disabled:s,loading:s,onClick:c,theme:"danger"})})]})};var eD=s(38370),eF=s(91691),eL=s(40152),eR=s(43932);let eP=e=>{let{open:t,onOpenChanged:s,onSuccess:i}=e;return(0,a.jsx)(C.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(C.cZ,{className:"outline-none sm:max-w-[625px]",children:[(0,a.jsx)(C.fK,{children:(0,a.jsx)(C.$N,{className:"mb-1 text-xl tracking-tight",children:"Add Github PAT"})}),(0,a.jsx)("div",{className:"flex flex-col space-y-2.5 ",children:(0,a.jsx)(eV,{onSuccess:i})})]})})},eV=e=>{let{onSuccess:t}=e,[s,i]=(0,l.useState)(null);return(0,a.jsx)(N.fC,{onSubmit:e=>{e.preventDefault();let s=new FormData(e.currentTarget).get("pat");if((null==s?void 0:s.length)<40){i("Your PAT must be at least 40 characters long");return}t(s)},className:"w-full",children:(0,a.jsxs)(N.gN,{name:"pat",className:"flex w-full flex-col",children:[(0,a.jsxs)("div",{className:"mb-0.5 flex w-full items-center",children:[(0,a.jsx)(N.__,{className:"text-[0.8rem]",children:"PAT"}),s&&(0,a.jsx)("small",{className:"ml-auto font-medium text-red-500",children:s})]}),(0,a.jsx)(N.oT,{asChild:!0,children:(0,a.jsx)("input",{type:"text",className:"mb-6 min-w-full resize-none rounded-sm border pl-2 text-[0.8rem] leading-8 dark:border-none",placeholder:"Enter your PAT"})}),(0,a.jsx)(N.k4,{className:"bg-pacific w-20 self-end rounded-md px-4 py-1.5 text-white duration-150 hover:bg-blue-500 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-600",children:"Add"})]})})};function ez(){let{orgRole:e,orgId:t,isLoaded:s}=(0,x.aC)(),{data:i}=(0,E.o8)(),r="org:admin"===e||!!(null==t?void 0:t.startsWith("personal-"));return(0,a.jsx)("div",{className:"w-full",children:s?(0,a.jsxs)(a.Fragment,{children:[!r&&(0,a.jsx)("div",{className:"mb-6 text-sm font-medium",children:"Only organization admins can enable or disable integrations."}),(0,a.jsxs)("div",{className:"2lg:grid-cols-3 grid w-full grid-cols-1 gap-6 md:grid-cols-2",children:[(0,a.jsx)(eZ,{isAdmin:r}),i&&(0,a.jsx)(eG,{isAdmin:r}),(0,a.jsx)(eU,{})]})]}):(0,a.jsx)(o.g,{})})}let eG=e=>{var t;let{isAdmin:s}=e,{orgId:r,userId:n}=(0,x.aC)(),c=null===(t=window)||void 0===t?void 0:t.location.href,o=btoa(JSON.stringify({organizationId:r,currentRoute:c})),m=btoa(JSON.stringify({userId:n,organizationId:r,currentRoute:c})),[u,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),[b,v]=(0,l.useState)(""),[N,k]=(0,l.useState)(""),{data:S,refetch:C,isLoading:E}=(0,J.ky)(r),{data:_,refetch:A,isLoading:T}=(0,J.vz)(n),[O,I]=(0,l.useState)(!1),[D,F]=(0,l.useState)(!1),L="6238525912145.6343946289111",R="pending"===p;(0,l.useEffect)(()=>{var e;if(!S){f(!1),g("");return}f(!0);let t=null===(e=S[0])||void 0===e?void 0:e.team_name;if(!t){f(!1),g("");return}g(t.charAt(0).toUpperCase()+t.slice(1)),k("https://slack.com/openid/connect/authorize?scope=openid,email,profile&response_type=code&team=".concat(S[0].team_id,"&redirect_uri=").concat("https://api.devin.ai","/slack-signin-callback&client_id=").concat(L,"&state=").concat(m))},[S,L,m]),(0,l.useEffect)(()=>{_&&_.slack&&v(_.slack.user_email)},[_]);let P=(0,l.useCallback)(async()=>{200===(await (0,ea.rF)()).status?(f(!1),g(""),G.A.success("Slack integration removed"),C()):G.A.error("Something went wrong"),F(!1)},[f,g,F,C]),V=(0,l.useCallback)(()=>{var e;let t="https://slack.com/oauth/v2/authorize?client_id=".concat(L,"&scope=groups:read,channels:read,channels:history,chat:write,chat:write.customize,commands,files:read,files:write,groups:history,im:history,im:read,im:write,reactions:write,remote_files:read,remote_files:write,users.profile:read,users:read,users:read.email&user_scope=email,openid,profile&state=").concat(o);null===(e=window.open(t,"_blank"))||void 0===e||e.focus()},[L,o]),z=(0,l.useCallback)(()=>{u?P():V()},[u,P,V]),Z=async()=>{try{await (0,ea.vZ)(),v(""),G.A.success("Slack integration removed"),A()}catch(e){G.A.error("Something went wrong"),console.error(e)}I(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.T,{open:D,onCancel:()=>F(!1),onConfirm:P,confirmLabel:"Remove Slack Integration",title:"Are you sure you want to remove this integration?",description:"Removing this integration will disconnect Devin from your Slack organization."}),(0,a.jsx)(d.T,{open:O,onCancel:()=>I(!1),onConfirm:Z,confirmLabel:"Remove Slack Integration",title:"Are you sure you want to remove this integration?",description:"Removing this integration will disconnect Devin from your Slack user account."}),(0,a.jsx)(eM,{title:"Slack",description:"Enables communication with Devin via Slack.",icon:(0,a.jsx)(eD.M,{size:28}),onConnectionToggle:z,connected:u,isLoading:E||T,isAdmin:s,learnMoreHref:"https://docs.devin.ai/Integrations/slack",pending:R,connectedComponent:(0,a.jsxs)("div",{className:"mt-3 flex flex-col space-y-4 md:mt-0 md:space-y-0",children:[(0,a.jsxs)("div",{className:"h-11 w-full items-center text-sm md:-mt-3 md:flex",children:[(0,a.jsx)("span",{className:"pr-1 tracking-wide opacity-80",children:"Connected Organization:"}),(0,a.jsxs)("span",{className:"ml-auto flex items-center text-sm font-medium",children:[(0,a.jsx)("span",{className:"mr-2.5",children:p}),(0,a.jsx)(h.z,{defaultIcon:(0,a.jsx)(i.r,{size:16}),loading:!1,onClick:()=>F(!0),theme:"danger-light",size:"sm",disabled:!s})]})]}),(0,a.jsxs)("div",{className:"h-11 w-full items-center text-sm md:flex",children:[(0,a.jsx)("span",{className:"pr-1 tracking-wide opacity-80",children:"Connected User:"}),(0,a.jsx)("span",{className:"ml-auto text-sm font-medium",children:b?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2.5",children:b}),(0,a.jsx)(h.z,{defaultIcon:(0,a.jsx)(i.r,{size:16}),loading:!1,onClick:()=>I(!0),theme:"danger-light",size:"sm"})]}):(0,a.jsx)(w.default,{href:N,target:"_blank",children:(0,a.jsx)("div",{className:(0,y.Z)("dark:border-input-dark flex h-8 w-min items-center justify-center whitespace-nowrap rounded-sm border border-white bg-[#4A154B] px-4 text-sm font-medium text-white duration-150",R?"cursor-not-allowed":"hover:bg-[#6d006f]"),children:R?(0,a.jsx)(j.U,{size:20,className:"animate-spin py-1"}):"Connect"})})})]})]})})]})},eZ=e=>{let{isAdmin:t}=e,{statusState:s}=eW(),{ghMainConfirmDelete:r,ghMainSetConfirmDelete:l,ghMainHandleDelete:n,ghMainOnToggle:c,ghAccountName:o,isGhConnected:m}=eH(s.value),{ghPatShowConfirmationModal:u,ghPatSetShowConfirmationModal:x,ghPatHandleAddTokenSuccess:f,ghPatOnToggle:p}=eq(m);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.T,{open:r,onCancel:()=>l(!1),onConfirm:n,confirmLabel:"Remove Github Integration",title:"Are you sure you want to remove this integration?",description:"Removing this integration will disconnect Devin from your Github organization."}),(0,a.jsx)(eP,{open:u,onOpenChanged:()=>x(!1),onSuccess:f}),(0,a.jsx)(eM,{title:"GitHub",description:"Enables Devin to work within your organization's GitHub repositories.",icon:(0,a.jsx)(eF.b,{size:28}),onConnectionToggle:c,onSecondaryConnectionToggle:p,learnMoreHref:"https://docs.devin.ai/Integrations/gh",connected:m,pending:!s.value,isLoading:s.isLoading,isAdmin:t,connectedComponent:(0,a.jsxs)("div",{className:"mt-8 w-full items-center text-sm md:mt-0 md:flex md:h-20",children:[(0,a.jsx)("span",{className:"tracking-wide opacity-80",children:"Connected:"}),(0,a.jsxs)("div",{className:"ml-auto flex items-center text-sm font-medium",children:[(0,a.jsx)("span",{className:"mr-2.5",children:o}),(0,a.jsx)(h.z,{defaultIcon:(0,a.jsx)(i.r,{size:16}),loading:!1,onClick:()=>l(!0),theme:"danger-light",size:"sm",disabled:!t})]})]})})]})},eM=e=>{let{title:t,description:s,icon:i,pending:r,connected:l,connectedComponent:n,learnMoreHref:c,onConnectionToggle:d,onSecondaryConnectionToggle:m,isLoading:u,isAdmin:x}=e;return(0,a.jsxs)("div",{className:"relative rounded-[12px] border border-[#f2f2f2] p-4 duration-100 hover:border-[#8b8b8b] dark:border-[#484848] dark:bg-[#353535] dark:hover:border-gray-300",children:[!u&&(0,a.jsx)("div",{className:"absolute right-[1.5rem] top-[1.5rem]",children:(0,a.jsx)(S.r,{id:"".concat(t,"-switch"),checked:l,onCheckedChange:d,disabled:!x})}),i,(0,a.jsx)("h3",{className:"mt-4 text-xl font-semibold",children:t}),(0,a.jsx)("div",{className:"mt-2 text-[13px] tracking-wide opacity-70",children:s}),c&&(0,a.jsx)(w.default,{href:c,target:"_blank",children:(0,a.jsxs)("div",{className:"mb-6 mt-1 flex w-24 items-center border-b border-[#f2f2f2] text-[13px] tracking-wide duration-150 hover:border-[#8b8b8b] dark:border-[#484848] dark:hover:border-white",children:[(0,a.jsx)("span",{children:"Learn more"}),(0,a.jsx)(eL.O,{height:16,width:16,className:"ml-2"})]})}),(0,a.jsxs)("div",{className:"",children:[u&&(0,a.jsx)(o.g,{}),!u&&l&&n,(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!u&&!l&&(0,a.jsx)(eK,{text:"Connect",isConnected:l,isLoading:u,pending:r,onConnectionToggle:d,isAdmin:x}),!u&&!l&&m&&(0,a.jsx)(eK,{text:"Connect with PAT",isConnected:l,isLoading:u,pending:r,onConnectionToggle:m,isAdmin:x})]})]})]})},eU=()=>(0,a.jsx)("div",{className:"flex min-h-60 items-center justify-center rounded-[12px] border border-[#f2f2f2] p-4 dark:border-[#484848] dark:bg-[#353535]",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h3",{className:"text-sm tracking-wide opacity-70",children:"More integrations to come!"})})}),eK=e=>{let{text:t,isConnected:s,isLoading:i,pending:r,onConnectionToggle:l,isAdmin:n}=e;return i||s?null:(0,a.jsx)("button",{onClick:l,disabled:!n,className:(0,y.Z)("overflow-hidden rounded-sm bg-slate-100 duration-150 disabled:cursor-not-allowed disabled:opacity-70 disabled:hover:bg-slate-100 dark:bg-slate-600 disabled:dark:hover:bg-slate-600",r?"cursor-not-allowed":"hover:bg-slate-200 dark:hover:bg-slate-700"),children:(0,a.jsx)("div",{className:"flex h-10 w-full items-center justify-center px-4 text-sm font-medium",children:r?(0,a.jsx)(j.U,{size:20,className:"animate-spin py-1"}):t})})},eW=()=>{let{orgId:e,userId:t}=(0,x.aC)(),s=(0,z.a)({queryFn:ea.A0,queryKey:["github-integration-status",e,t],enabled:!!e&&!!t});return{statusQuery:s,statusState:{isLoading:s.isLoading,value:s.data,error:s.error}}},eH=e=>{let{userId:t}=(0,x.aC)(),{data:s}=(0,E.o8)(),[a,i]=(0,l.useState)(!1),[r,n]=(0,l.useState)((null==e?void 0:e.account_name)?"@".concat(e.account_name):""),[c,d]=(0,l.useState)((null==e?void 0:e.account_name)!==null);(0,l.useEffect)(()=>{n((null==e?void 0:e.account_name)?"@".concat(e.account_name):""),d((null==e?void 0:e.account_name)!==null)},[e]);let o=(0,l.useCallback)(async()=>{try{await (0,ea.fj)(),d(!1),n(""),G.A.success("Github integration removed")}catch(e){G.A.error("Something went wrong")}i(!1)},[d,i]),m=(0,l.useCallback)(()=>{let e=(0,eR.Q)(t,null==s?void 0:s.id);window.location.assign(e)},[t,null==s?void 0:s.id]),u=(0,l.useCallback)(()=>{c?i(!0):m()},[c,i,m]);return{ghMainConfirmDelete:a,ghMainSetConfirmDelete:i,ghMainHandleDelete:o,ghMainOnToggle:u,ghAccountName:r,isGhConnected:c}},eq=e=>{let[t,s]=(0,l.useState)(!1),a=(0,l.useCallback)(()=>{e||s(!0)},[e,s]),i=(0,l.useCallback)(async e=>{s(!1);try{await (0,ea.UF)(e),G.A.success("Github integration added")}catch(e){G.A.error("Something went wrong")}},[]);return{ghPatShowConfirmationModal:t,ghPatSetShowConfirmationModal:s,ghPatHandleAddTokenSuccess:i,ghPatOnToggle:a}}},43932:function(e,t,s){s.d(t,{Q:function(){return a}});function a(e,t){var s;if(!e)return"";let a=null===(s=window)||void 0===s?void 0:s.location.href;return"".concat("https://github.com/apps/devin-ai-integration/installations/new","?state=").concat(btoa(JSON.stringify({userId:e,organizationId:t||"personal-clerk-".concat(e),currentRoute:a})))}}}]);